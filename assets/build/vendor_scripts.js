var bkExtend=function(){var t=arguments;for(var e in 1==t.length&&(t=[this,t[0]]),t[1])t[0][e]=t[1][e];return t[0]};function bkClass(){}bkClass.prototype.construct=function(){},bkClass.extend=function(t){var e=function(){if(arguments[0]!==bkClass)return this.construct.apply(this,arguments)},n=new this(bkClass);return bkExtend(n,t),e.prototype=n,e.extend=this.extend,e};var bkElement=bkClass.extend({construct:function(t,e){return"string"==typeof t&&(t=(e||document).createElement(t)),t=$BK(t)},appendTo:function(t){return t.appendChild(this),this},appendBefore:function(t){return t.parentNode.insertBefore(this,t),this},addEvent:function(t,e){return bkLib.addEvent(this,t,e),this},setContent:function(t){return this.innerHTML=t,this},pos:function(){var t=curtop=0;obj=this;if(obj.offsetParent)do{t+=obj.offsetLeft,curtop+=obj.offsetTop}while(obj=obj.offsetParent);var e=window.opera?0:parseInt(this.getStyle("border-width")||this.style.border)||0;return[t+e,curtop+e+this.offsetHeight]},noSelect:function(){return bkLib.noSelect(this),this},parentTag:function(t){var e=this;do{if(e&&e.nodeName&&e.nodeName.toUpperCase()==t)return e;e=e.parentNode}while(e);return!1},hasClass:function(t){return this.className.match(new RegExp("(\\s|^)nicEdit-"+t+"(\\s|$)"))},addClass:function(t){return this.hasClass(t)||(this.className+=" nicEdit-"+t),this},removeClass:function(t){return this.hasClass(t)&&(this.className=this.className.replace(new RegExp("(\\s|^)nicEdit-"+t+"(\\s|$)")," ")),this},setStyle:function(t){var e=this.style;for(var n in t)switch(n){case"float":e.cssFloat=e.styleFloat=t[n];break;case"opacity":e.opacity=t[n],e.filter="alpha(opacity="+Math.round(100*t[n])+")";break;case"className":this.className=t[n];break;default:e[n]=t[n]}return this},getStyle:function(t,e){var n=e||document.defaultView;if(1==this.nodeType)return n&&n.getComputedStyle?n.getComputedStyle(this,null).getPropertyValue(t):this.currentStyle[bkLib.camelize(t)]},remove:function(){return this.parentNode.removeChild(this),this},setAttributes:function(t){for(var e in t)this[e]=t[e];return this}}),bkLib={isMSIE:-1!=navigator.appVersion.indexOf("MSIE"),addEvent:function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},toArray:function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n},noSelect:function(t){t.setAttribute&&"input"!=t.nodeName.toLowerCase()&&"textarea"!=t.nodeName.toLowerCase()&&t.setAttribute("unselectable","on");for(var e=0;e<t.childNodes.length;e++)bkLib.noSelect(t.childNodes[e])},camelize:function(t){return t.replace(/\-(.)/g,function(t,e){return e.toUpperCase()})},inArray:function(t,e){return null!=bkLib.search(t,e)},search:function(t,e){for(var n=0;n<t.length;n++)if(t[n]==e)return n;return null},cancelEvent:function(t){return(t=t||window.event).preventDefault&&t.stopPropagation&&(t.preventDefault(),t.stopPropagation()),!1},domLoad:[],domLoaded:function(){if(!arguments.callee.done)for(arguments.callee.done=!0,i=0;i<bkLib.domLoad.length;i++)bkLib.domLoad[i]()},onDomLoaded:function(t){this.domLoad.push(t),document.addEventListener?document.addEventListener("DOMContentLoaded",bkLib.domLoaded,null):bkLib.isMSIE&&(document.write("<style>.nicEdit-main p { margin: 0; }</style><script id=__ie_onload defer "+("https:"==location.protocol?"src='javascript:void(0)'":"src=//0")+"><\/script>"),$BK("__ie_onload").onreadystatechange=function(){"complete"==this.readyState&&bkLib.domLoaded()}),window.onload=bkLib.domLoaded}};function $BK(t){return"string"==typeof t&&(t=document.getElementById(t)),t&&!t.appendTo?bkExtend(t,bkElement.prototype):t}var bkEvent={addEvent:function(t,e){return e&&(this.eventList=this.eventList||{},this.eventList[t]=this.eventList[t]||[],this.eventList[t].push(e)),this},fireEvent:function(){var t=bkLib.toArray(arguments),e=t.shift();if(this.eventList&&this.eventList[e])for(var n=0;n<this.eventList[e].length;n++)this.eventList[e][n].apply(this,t)}};function __(t){return t}Function.prototype.closure=function(){var t=this,e=bkLib.toArray(arguments),n=e.shift();return function(){if(void 0!==bkLib)return t.apply(n,e.concat(bkLib.toArray(arguments)))}},Function.prototype.closureListener=function(){var t=this,e=bkLib.toArray(arguments),n=e.shift();return function(i){if((i=i||window.event).target)var s=i.target;else s=i.srcElement;return t.apply(n,[i,s].concat(e))}};var nicEditorConfig=bkClass.extend({buttons:{bold:{name:__("Click to Bold"),command:"Bold",tags:["B","STRONG"],css:{"font-weight":"bold"},key:"b"},italic:{name:__("Click to Italic"),command:"Italic",tags:["EM","I"],css:{"font-style":"italic"},key:"i"},underline:{name:__("Click to Underline"),command:"Underline",tags:["U"],css:{"text-decoration":"underline"},key:"u"},left:{name:__("Left Align"),command:"justifyleft",noActive:!0},center:{name:__("Center Align"),command:"justifycenter",noActive:!0},right:{name:__("Right Align"),command:"justifyright",noActive:!0},justify:{name:__("Justify Align"),command:"justifyfull",noActive:!0},ol:{name:__("Insert Ordered List"),command:"insertorderedlist",tags:["OL"]},ul:{name:__("Insert Unordered List"),command:"insertunorderedlist",tags:["UL"]},subscript:{name:__("Click to Subscript"),command:"subscript",tags:["SUB"]},superscript:{name:__("Click to Superscript"),command:"superscript",tags:["SUP"]},strikethrough:{name:__("Click to Strike Through"),command:"strikeThrough",css:{"text-decoration":"line-through"}},removeformat:{name:__("Remove Formatting"),command:"removeformat",noActive:!0},indent:{name:__("Indent Text"),command:"indent",noActive:!0},outdent:{name:__("Remove Indent"),command:"outdent",noActive:!0},hr:{name:__("Horizontal Rule"),command:"insertHorizontalRule",noActive:!0}},iconsPath:"http://js.nicedit.com/nicEditIcons-latest.gif",buttonList:["save","bold","italic","underline","left","center","right","justify","ol","ul","fontSize","fontFamily","fontFormat","indent","outdent","image","upload","link","unlink","forecolor","bgcolor"],iconList:{xhtml:1,bgcolor:2,forecolor:3,bold:4,center:5,hr:6,indent:7,italic:8,justify:9,left:10,ol:11,outdent:12,removeformat:13,right:14,save:25,strikethrough:16,subscript:17,superscript:18,ul:19,underline:20,image:21,link:22,unlink:23,close:24,arrow:26,upload:27}}),nicEditors={nicPlugins:[],editors:[],registerPlugin:function(t,e){this.nicPlugins.push({p:t,o:e})},allTextAreas:function(t){for(var e=document.getElementsByTagName("textarea"),n=0;n<e.length;n++)nicEditors.editors.push(new nicEditor(t).panelInstance(e[n]));return nicEditors.editors},findEditor:function(t){for(var e=nicEditors.editors,n=0;n<e.length;n++)if(e[n].instanceById(t))return e[n].instanceById(t)}},nicEditor=bkClass.extend({construct:function(t){this.options=new nicEditorConfig,bkExtend(this.options,t),this.nicInstances=new Array,this.loadedPlugins=new Array;for(var e=nicEditors.nicPlugins,n=0;n<e.length;n++)this.loadedPlugins.push(new e[n].p(this,e[n].o));nicEditors.editors.push(this),bkLib.addEvent(document.body,"mousedown",this.selectCheck.closureListener(this))},panelInstance:function(t,e){t=this.checkReplace($BK(t));var n=new bkElement("DIV").setStyle({width:(parseInt(t.getStyle("width"))||t.clientWidth)+"px"}).appendBefore(t);return this.setPanel(n),this.addInstance(t,e)},checkReplace:function(t){var e=nicEditors.findEditor(t);return e&&(e.removeInstance(t),e.removePanel()),t},addInstance:function(t,e){if((t=this.checkReplace($BK(t))).contentEditable||window.opera)var n=new nicEditorInstance(t,e,this);else n=new nicEditorIFrameInstance(t,e,this);return this.nicInstances.push(n),this},removeInstance:function(t){t=$BK(t);for(var e=this.nicInstances,n=0;n<e.length;n++)e[n].e==t&&(e[n].remove(),this.nicInstances.splice(n,1))},removePanel:function(t){this.nicPanel&&(this.nicPanel.remove(),this.nicPanel=null)},instanceById:function(t){t=$BK(t);for(var e=this.nicInstances,n=0;n<e.length;n++)if(e[n].e==t)return e[n]},setPanel:function(t){return this.nicPanel=new nicEditorPanel($BK(t),this.options,this),this.fireEvent("panel",this.nicPanel),this},nicCommand:function(t,e){this.selectedInstance&&this.selectedInstance.nicCommand(t,e)},getIcon:function(t,e){var n=this.options.iconList[t],i=e.iconFiles?e.iconFiles[t]:"";return{backgroundImage:"url('"+(n?this.options.iconsPath:i)+"')",backgroundPosition:(n?-18*(n-1):0)+"px 0px"}},selectCheck:function(t,e){do{if(e.className&&-1!=e.className.indexOf("nicEdit"))return!1}while(e=e.parentNode);return this.fireEvent("blur",this.selectedInstance,e),this.lastSelectedInstance=this.selectedInstance,this.selectedInstance=null,!1}});nicEditor=nicEditor.extend(bkEvent);var nicEditorInstance=bkClass.extend({isSelected:!1,construct:function(t,e,n){this.ne=n,this.elm=this.e=t,this.options=e||{},newX=parseInt(t.getStyle("width"))||t.clientWidth,newY=parseInt(t.getStyle("height"))||t.clientHeight,this.initialHeight=newY-8;var i="textarea"==t.nodeName.toLowerCase();if(i||this.options.hasPanel){var s=bkLib.isMSIE&&!(void 0!==document.body.style.maxHeight&&"CSS1Compat"==document.compatMode),o={width:newX+"px",border:"1px solid #ccc",borderTop:0,overflowY:"auto",overflowX:"hidden"};o[s?"height":"maxHeight"]=this.ne.options.maxHeight?this.ne.options.maxHeight+"px":null,this.editorContain=new bkElement("DIV").setStyle(o).appendBefore(t);var a=new bkElement("DIV").setStyle({width:newX-8+"px",margin:"4px",minHeight:newY+"px"}).addClass("main").appendTo(this.editorContain);if(t.setStyle({display:"none"}),a.innerHTML=t.innerHTML,i){a.setContent(t.value),this.copyElm=t;var r=t.parentTag("FORM");r&&bkLib.addEvent(r,"submit",this.saveContent.closure(this))}a.setStyle(s?{height:newY+"px"}:{overflow:"hidden"}),this.elm=a}this.ne.addEvent("blur",this.blur.closure(this)),this.init(),this.blur()},init:function(){this.elm.setAttribute("contentEditable","true"),""==this.getContent()&&this.setContent("<br />"),this.instanceDoc=document.defaultView,this.elm.addEvent("mousedown",this.selected.closureListener(this)).addEvent("keypress",this.keyDown.closureListener(this)).addEvent("focus",this.selected.closure(this)).addEvent("blur",this.blur.closure(this)).addEvent("keyup",this.selected.closure(this)),this.ne.fireEvent("add",this)},remove:function(){this.saveContent(),(this.copyElm||this.options.hasPanel)&&(this.editorContain.remove(),this.e.setStyle({display:"block"}),this.ne.removePanel()),this.disable(),this.ne.fireEvent("remove",this)},disable:function(){this.elm.setAttribute("contentEditable","false")},getSel:function(){return window.getSelection?window.getSelection():document.selection},getRng:function(){var t=this.getSel();if(t&&0!==t.rangeCount)return t.rangeCount>0?t.getRangeAt(0):t.createRange()},selRng:function(t,e){window.getSelection?(e.removeAllRanges(),e.addRange(t)):t.select()},selElm:function(){var t=this.getRng();if(t){if(t.startContainer){var e=t.startContainer;if(1==t.cloneContents().childNodes.length)for(var n=0;n<e.childNodes.length;n++){var i=e.childNodes[n].ownerDocument.createRange();if(i.selectNode(e.childNodes[n]),1!=t.compareBoundaryPoints(Range.START_TO_START,i)&&-1!=t.compareBoundaryPoints(Range.END_TO_END,i))return $BK(e.childNodes[n])}return $BK(e)}return $BK("Control"==this.getSel().type?t.item(0):t.parentElement())}},saveRng:function(){this.savedRange=this.getRng(),this.savedSel=this.getSel()},restoreRng:function(){this.savedRange&&this.selRng(this.savedRange,this.savedSel)},keyDown:function(t,e){t.ctrlKey&&this.ne.fireEvent("key",this,t)},selected:function(t,e){if(e||(e=this.selElm)||(e=this.selElm()),!t.ctrlKey){var n=this.ne.selectedInstance;n!=this&&(n&&this.ne.fireEvent("blur",n,e),this.ne.selectedInstance=this,this.ne.fireEvent("focus",n,e)),this.ne.fireEvent("selected",n,e),this.isFocused=!0,this.elm.addClass("selected")}return!1},blur:function(){this.isFocused=!1,this.elm.removeClass("selected")},saveContent:function(){(this.copyElm||this.options.hasPanel)&&(this.ne.fireEvent("save",this),this.copyElm?this.copyElm.value=this.getContent():this.e.innerHTML=this.getContent())},getElm:function(){return this.elm},getContent:function(){return this.content=this.getElm().innerHTML,this.ne.fireEvent("get",this),this.content},setContent:function(t){this.content=t,this.ne.fireEvent("set",this),this.elm.innerHTML=this.content},nicCommand:function(t,e){document.execCommand(t,!1,e)}}),nicEditorIFrameInstance=nicEditorInstance.extend({savedStyles:[],init:function(){var t=this.elm.innerHTML.replace(/^\s+|\s+$/g,"");this.elm.innerHTML="",t||(t="<br />"),this.initialContent=t,this.elmFrame=new bkElement("iframe").setAttributes({src:"javascript:;",frameBorder:0,allowTransparency:"true",scrolling:"no"}).setStyle({height:"100px",width:"100%"}).addClass("frame").appendTo(this.elm),this.copyElm&&this.elmFrame.setStyle({width:this.elm.offsetWidth-4+"px"});for(itm in["font-size","font-family","font-weight","color"])this.savedStyles[bkLib.camelize(itm)]=this.elm.getStyle(itm);setTimeout(this.initFrame.closure(this),50)},disable:function(){this.elm.innerHTML=this.getContent()},initFrame:function(){var t=$BK(this.elmFrame.contentWindow.document);t.designMode="on",t.open();var e=this.ne.options.externalCSS;t.write("<html><head>"+(e?'<link href="'+e+'" rel="stylesheet" type="text/css" />':"")+'</head><body id="nicEditContent" style="margin: 0 !important; background-color: transparent !important;">'+this.initialContent+"</body></html>"),t.close(),this.frameDoc=t,this.frameWin=$BK(this.elmFrame.contentWindow),this.frameContent=$BK(this.frameWin.document.body).setStyle(this.savedStyles),this.instanceDoc=this.frameWin.document.defaultView,this.heightUpdate(),this.frameDoc.addEvent("mousedown",this.selected.closureListener(this)).addEvent("keyup",this.heightUpdate.closureListener(this)).addEvent("keydown",this.keyDown.closureListener(this)).addEvent("keyup",this.selected.closure(this)),this.ne.fireEvent("add",this)},getElm:function(){return this.frameContent},setContent:function(t){this.content=t,this.ne.fireEvent("set",this),this.frameContent.innerHTML=this.content,this.heightUpdate()},getSel:function(){return this.frameWin?this.frameWin.getSelection():this.frameDoc.selection},heightUpdate:function(){this.elmFrame.style.height=Math.max(this.frameContent.offsetHeight,this.initialHeight)+"px"},nicCommand:function(t,e){this.frameDoc.execCommand(t,!1,e),setTimeout(this.heightUpdate.closure(this),100)}}),nicEditorPanel=bkClass.extend({construct:function(t,e,n){this.elm=t,this.options=e,this.ne=n,this.panelButtons=new Array,this.buttonList=bkExtend([],this.ne.options.buttonList),this.panelContain=new bkElement("DIV").setStyle({overflow:"hidden",width:"100%",border:"1px solid #cccccc",backgroundColor:"#efefef"}).addClass("panelContain"),this.panelElm=new bkElement("DIV").setStyle({margin:"2px",marginTop:"0px",zoom:1,overflow:"hidden"}).addClass("panel").appendTo(this.panelContain),this.panelContain.appendTo(t);var i=this.ne.options,s=i.buttons;for(button in s)this.addButton(button,i,!0);this.reorder(),t.noSelect()},addButton:function(buttonName,options,noOrder){var button=options.buttons[buttonName],type=button.type?eval("(typeof("+button.type+') == "undefined") ? null : '+button.type+";"):nicEditorButton,hasButton=bkLib.inArray(this.buttonList,buttonName);type&&(hasButton||this.ne.options.fullPanel)&&(this.panelButtons.push(new type(this.panelElm,buttonName,options,this.ne)),hasButton||this.buttonList.push(buttonName))},findButton:function(t){for(var e=0;e<this.panelButtons.length;e++)if(this.panelButtons[e].name==t)return this.panelButtons[e]},reorder:function(){for(var t=this.buttonList,e=0;e<t.length;e++){var n=this.findButton(t[e]);n&&this.panelElm.appendChild(n.margin)}},remove:function(){this.elm.remove()}}),nicEditorButton=bkClass.extend({construct:function(t,e,n,i){this.options=n.buttons[e],this.name=e,this.ne=i,this.elm=t,this.margin=new bkElement("DIV").setStyle({float:"left",marginTop:"2px"}).appendTo(t),this.contain=new bkElement("DIV").setStyle({width:"20px",height:"20px"}).addClass("buttonContain").appendTo(this.margin),this.border=new bkElement("DIV").setStyle({backgroundColor:"#efefef",border:"1px solid #efefef"}).appendTo(this.contain),this.button=new bkElement("DIV").setStyle({width:"18px",height:"18px",overflow:"hidden",zoom:1,cursor:"pointer"}).addClass("button").setStyle(this.ne.getIcon(e,n)).appendTo(this.border),this.button.addEvent("mouseover",this.hoverOn.closure(this)).addEvent("mouseout",this.hoverOff.closure(this)).addEvent("mousedown",this.mouseClick.closure(this)).noSelect(),window.opera||(this.button.onmousedown=this.button.onclick=bkLib.cancelEvent),i.addEvent("selected",this.enable.closure(this)).addEvent("blur",this.disable.closure(this)).addEvent("key",this.key.closure(this)),this.disable(),this.init()},init:function(){},hide:function(){this.contain.setStyle({display:"none"})},updateState:function(){this.isDisabled?this.setBg():this.isHover?this.setBg("hover"):this.isActive?this.setBg("active"):this.setBg()},setBg:function(t){switch(t){case"hover":var e={border:"1px solid #666",backgroundColor:"#ddd"};break;case"active":e={border:"1px solid #666",backgroundColor:"#ccc"};break;default:e={border:"1px solid #efefef",backgroundColor:"#efefef"}}this.border.setStyle(e).addClass("button-"+t)},checkNodes:function(t){var e=t;do{if(this.options.tags&&bkLib.inArray(this.options.tags,e.nodeName))return this.activate(),!0}while(e=e.parentNode&&"nicEdit"!=e.className);for(e=$BK(t);3==e.nodeType;)e=$BK(e.parentNode);if(this.options.css)for(itm in this.options.css)if(e.getStyle(itm,this.ne.selectedInstance.instanceDoc)==this.options.css[itm])return this.activate(),!0;return this.deactivate(),!1},activate:function(){this.isDisabled||(this.isActive=!0,this.updateState(),this.ne.fireEvent("buttonActivate",this))},deactivate:function(){this.isActive=!1,this.updateState(),this.isDisabled||this.ne.fireEvent("buttonDeactivate",this)},enable:function(t,e){this.isDisabled=!1,this.contain.setStyle({opacity:1}).addClass("buttonEnabled"),this.updateState(),this.checkNodes(e)},disable:function(t,e){this.isDisabled=!0,this.contain.setStyle({opacity:.6}).removeClass("buttonEnabled"),this.updateState()},toggleActive:function(){this.isActive?this.deactivate():this.activate()},hoverOn:function(){this.isDisabled||(this.isHover=!0,this.updateState(),this.ne.fireEvent("buttonOver",this))},hoverOff:function(){this.isHover=!1,this.updateState(),this.ne.fireEvent("buttonOut",this)},mouseClick:function(){this.options.command&&(this.ne.nicCommand(this.options.command,this.options.commandArgs),this.options.noActive||this.toggleActive()),this.ne.fireEvent("buttonClick",this)},key:function(t,e){this.options.key&&e.ctrlKey&&String.fromCharCode(e.keyCode||e.charCode).toLowerCase()==this.options.key&&(this.mouseClick(),e.preventDefault&&e.preventDefault())}}),nicPlugin=bkClass.extend({construct:function(t,e){this.options=e,this.ne=t,this.ne.addEvent("panel",this.loadPanel.closure(this)),this.init()},loadPanel:function(t){var e=this.options.buttons;for(var n in e)t.addButton(n,this.options);t.reorder()},init:function(){}}),nicPaneOptions={},nicEditorPane=bkClass.extend({construct:function(t,e,n,i){this.ne=e,this.elm=t,this.pos=t.pos(),this.contain=new bkElement("div").setStyle({zIndex:"99999",overflow:"hidden",position:"absolute",left:this.pos[0]+"px",top:this.pos[1]+"px"}),this.pane=new bkElement("div").setStyle({fontSize:"12px",border:"1px solid #ccc",overflow:"hidden",padding:"4px",textAlign:"left",backgroundColor:"#ffffc9"}).addClass("pane").setStyle(n).appendTo(this.contain),i&&!i.options.noClose&&(this.close=new bkElement("div").setStyle({float:"right",height:"16px",width:"16px",cursor:"pointer"}).setStyle(this.ne.getIcon("close",nicPaneOptions)).addEvent("mousedown",i.removePane.closure(this)).appendTo(this.pane)),this.contain.noSelect().appendTo(document.body),this.position(),this.init()},init:function(){},position:function(){if(this.ne.nicPanel){var t=this.ne.nicPanel.elm,e=t.pos()[0]+parseInt(t.getStyle("width"))-(parseInt(this.pane.getStyle("width"))+8);e<this.pos[0]&&this.contain.setStyle({left:e+"px"})}},toggle:function(){this.isVisible=!this.isVisible,this.contain.setStyle({display:this.isVisible?"block":"none"})},remove:function(){this.contain&&(this.contain.remove(),this.contain=null)},append:function(t){t.appendTo(this.pane)},setContent:function(t){this.pane.setContent(t)}}),nicSelectOptions={buttons:{fontSize:{name:__("Select Font Size"),type:"nicEditorFontSizeSelect",command:"fontsize"},fontFamily:{name:__("Select Font Family"),type:"nicEditorFontFamilySelect",command:"fontname"},fontFormat:{name:__("Select Font Format"),type:"nicEditorFontFormatSelect",command:"formatBlock"}}},nicEditorSelect=bkClass.extend({construct:function(t,e,n,i){this.options=n.buttons[e],this.elm=t,this.ne=i,this.name=e,this.selOptions=new Array,this.margin=new bkElement("div").setStyle({float:"left",margin:"2px 1px 0 1px"}).appendTo(this.elm),this.contain=new bkElement("div").setStyle({width:"90px",height:"20px",cursor:"pointer",overflow:"hidden"}).addClass("selectContain").addEvent("click",this.toggle.closure(this)).appendTo(this.margin),this.items=new bkElement("div").setStyle({overflow:"hidden",zoom:1,border:"1px solid #ccc",paddingLeft:"3px",backgroundColor:"#fff"}).appendTo(this.contain),this.control=new bkElement("div").setStyle({overflow:"hidden",float:"right",height:"18px",width:"16px"}).addClass("selectControl").setStyle(this.ne.getIcon("arrow",n)).appendTo(this.items),this.txt=new bkElement("div").setStyle({overflow:"hidden",float:"left",width:"66px",height:"14px",marginTop:"1px",fontFamily:"sans-serif",textAlign:"center",fontSize:"12px"}).addClass("selectTxt").appendTo(this.items),window.opera||(this.contain.onmousedown=this.control.onmousedown=this.txt.onmousedown=bkLib.cancelEvent),this.margin.noSelect(),this.ne.addEvent("selected",this.enable.closure(this)).addEvent("blur",this.disable.closure(this)),this.disable(),this.init()},disable:function(){this.isDisabled=!0,this.close(),this.contain.setStyle({opacity:.6})},enable:function(t){this.isDisabled=!1,this.close(),this.contain.setStyle({opacity:1})},setDisplay:function(t){this.txt.setContent(t)},toggle:function(){this.isDisabled||(this.pane?this.close():this.open())},open:function(){this.pane=new nicEditorPane(this.items,this.ne,{width:"88px",padding:"0px",borderTop:0,borderLeft:"1px solid #ccc",borderRight:"1px solid #ccc",borderBottom:"0px",backgroundColor:"#fff"});for(var t=0;t<this.selOptions.length;t++){var e=this.selOptions[t],n=new bkElement("div").setStyle({overflow:"hidden",borderBottom:"1px solid #ccc",width:"88px",textAlign:"left",overflow:"hidden",cursor:"pointer"}),i=new bkElement("div").setStyle({padding:"0px 4px"}).setContent(e[1]).appendTo(n).noSelect();i.addEvent("click",this.update.closure(this,e[0])).addEvent("mouseover",this.over.closure(this,i)).addEvent("mouseout",this.out.closure(this,i)).setAttributes("id",e[0]),this.pane.append(n),window.opera||(i.onmousedown=bkLib.cancelEvent)}},close:function(){this.pane&&(this.pane=this.pane.remove())},over:function(t){t.setStyle({backgroundColor:"#ccc"})},out:function(t){t.setStyle({backgroundColor:"#fff"})},add:function(t,e){this.selOptions.push(new Array(t,e))},update:function(t){this.ne.nicCommand(this.options.command,t),this.close()}}),nicEditorFontSizeSelect=nicEditorSelect.extend({sel:{1:"1&nbsp;(8pt)",2:"2&nbsp;(10pt)",3:"3&nbsp;(12pt)",4:"4&nbsp;(14pt)",5:"5&nbsp;(18pt)",6:"6&nbsp;(24pt)"},init:function(){for(itm in this.setDisplay("Font&nbsp;Size..."),this.sel)this.add(itm,'<font size="'+itm+'">'+this.sel[itm]+"</font>")}}),nicEditorFontFamilySelect=nicEditorSelect.extend({sel:{arial:"Arial","comic sans ms":"Comic Sans","courier new":"Courier New",georgia:"Georgia",helvetica:"Helvetica",impact:"Impact","times new roman":"Times","trebuchet ms":"Trebuchet",verdana:"Verdana"},init:function(){for(itm in this.setDisplay("Font&nbsp;Family..."),this.sel)this.add(itm,'<font face="'+itm+'">'+this.sel[itm]+"</font>")}}),nicEditorFontFormatSelect=nicEditorSelect.extend({sel:{p:"Paragraph",pre:"Pre",h6:"Heading&nbsp;6",h5:"Heading&nbsp;5",h4:"Heading&nbsp;4",h3:"Heading&nbsp;3",h2:"Heading&nbsp;2",h1:"Heading&nbsp;1"},init:function(){for(itm in this.setDisplay("Font&nbsp;Format..."),this.sel){var t=itm.toUpperCase();this.add("<"+t+">","<"+itm+' style="padding: 0px; margin: 0px;">'+this.sel[itm]+"</"+t+">")}}});nicEditors.registerPlugin(nicPlugin,nicSelectOptions);var nicButtonTips=bkClass.extend({construct:function(t){this.ne=t,t.addEvent("buttonOver",this.show.closure(this)).addEvent("buttonOut",this.hide.closure(this))},show:function(t){this.timer=setTimeout(this.create.closure(this,t),400)},create:function(t){this.timer=null,this.pane||(this.pane=new nicEditorPane(t.button,this.ne,{fontSize:"12px",marginTop:"5px"}),this.pane.setContent(t.options.name))},hide:function(t){this.timer&&clearTimeout(this.timer),this.pane&&(this.pane=this.pane.remove())}});nicEditors.registerPlugin(nicButtonTips);var nicEditorAdvancedButton=nicEditorButton.extend({init:function(){this.ne.addEvent("selected",this.removePane.closure(this)).addEvent("blur",this.removePane.closure(this))},mouseClick:function(){this.isDisabled||(this.pane&&this.pane.pane?this.removePane():(this.pane=new nicEditorPane(this.contain,this.ne,{width:this.width||"270px",backgroundColor:"#fff"},this),this.addPane(),this.ne.selectedInstance.saveRng()))},addForm:function(t,e){for(itm in this.form=new bkElement("form").addEvent("submit",this.submit.closureListener(this)),this.pane.append(this.form),this.inputs={},t){var n=t[itm],i="";e&&(i=e.getAttribute(itm)),i||(i=n.value||"");var s=t[itm].type;if("title"==s)new bkElement("div").setContent(n.txt).setStyle({fontSize:"14px",fontWeight:"bold",padding:"0px",margin:"2px 0"}).appendTo(this.form);else{var o=new bkElement("div").setStyle({overflow:"hidden",clear:"both"}).appendTo(this.form);switch(n.txt&&new bkElement("label").setAttributes({for:itm}).setContent(n.txt).setStyle({margin:"2px 4px",fontSize:"13px",width:"50px",lineHeight:"20px",textAlign:"right",float:"left"}).appendTo(o),s){case"text":this.inputs[itm]=new bkElement("input").setAttributes({id:itm,value:i,type:"text"}).setStyle({margin:"2px 0",fontSize:"13px",float:"left",height:"20px",border:"1px solid #ccc",overflow:"hidden"}).setStyle(n.style).appendTo(o);break;case"select":for(opt in this.inputs[itm]=new bkElement("select").setAttributes({id:itm}).setStyle({border:"1px solid #ccc",float:"left",margin:"2px 0"}).appendTo(o),n.options)new bkElement("option").setAttributes({value:opt,selected:opt==i?"selected":""}).setContent(n.options[opt]).appendTo(this.inputs[itm]);break;case"content":this.inputs[itm]=new bkElement("textarea").setAttributes({id:itm}).setStyle({border:"1px solid #ccc",float:"left"}).setStyle(n.style).appendTo(o),this.inputs[itm].value=i}}}new bkElement("input").setAttributes({type:"submit"}).setStyle({backgroundColor:"#efefef",border:"1px solid #ccc",margin:"3px 0",float:"left",clear:"both"}).appendTo(this.form),this.form.onsubmit=bkLib.cancelEvent},submit:function(){},findElm:function(t,e,n){for(var i=this.ne.selectedInstance.getElm().getElementsByTagName(t),s=0;s<i.length;s++)if(i[s].getAttribute(e)==n)return $BK(i[s])},removePane:function(){this.pane&&(this.pane.remove(),this.pane=null,this.ne.selectedInstance.restoreRng())}}),nicLinkOptions={buttons:{link:{name:"Add Link",type:"nicLinkButton",tags:["A"]},unlink:{name:"Remove Link",command:"unlink",noActive:!0}}},nicLinkButton=nicEditorAdvancedButton.extend({addPane:function(){this.ln=this.ne.selectedInstance.selElm().parentTag("A"),this.addForm({"":{type:"title",txt:"Add/Edit Link"},href:{type:"text",txt:"URL",value:"http://",style:{width:"150px"}},title:{type:"text",txt:"Title"},target:{type:"select",txt:"Open In",options:{"":"Current Window",_blank:"New Window"},style:{width:"100px"}}},this.ln)},submit:function(t){var e=this.inputs.href.value;if("http://"==e||""==e)return alert("You must enter a URL to Create a Link"),!1;if(this.removePane(),!this.ln){var n="javascript:nicTemp();";this.ne.nicCommand("createlink",n),this.ln=this.findElm("A","href",n)}this.ln&&this.ln.setAttributes({href:this.inputs.href.value,title:this.inputs.title.value,target:this.inputs.target.options[this.inputs.target.selectedIndex].value})}});nicEditors.registerPlugin(nicPlugin,nicLinkOptions);var nicColorOptions={buttons:{forecolor:{name:__("Change Text Color"),type:"nicEditorColorButton",noClose:!0},bgcolor:{name:__("Change Background Color"),type:"nicEditorBgColorButton",noClose:!0}}},nicEditorColorButton=nicEditorAdvancedButton.extend({addPane:function(){var t={0:"00",1:"33",2:"66",3:"99",4:"CC",5:"FF"},e=new bkElement("DIV").setStyle({width:"270px"});for(var n in t)for(var i in t)for(var s in t){var o="#"+t[n]+t[s]+t[i],a=new bkElement("DIV").setStyle({cursor:"pointer",height:"15px",float:"left"}).appendTo(e),r=new bkElement("DIV").setStyle({border:"2px solid "+o}).appendTo(a),l=new bkElement("DIV").setStyle({backgroundColor:o,overflow:"hidden",width:"11px",height:"11px"}).addEvent("click",this.colorSelect.closure(this,o)).addEvent("mouseover",this.on.closure(this,r)).addEvent("mouseout",this.off.closure(this,r,o)).appendTo(r);window.opera||(a.onmousedown=l.onmousedown=bkLib.cancelEvent)}this.pane.append(e.noSelect())},colorSelect:function(t){this.ne.nicCommand("foreColor",t),this.removePane()},on:function(t){t.setStyle({border:"2px solid #000"})},off:function(t,e){t.setStyle({border:"2px solid "+e})}}),nicEditorBgColorButton=nicEditorColorButton.extend({colorSelect:function(t){this.ne.nicCommand("hiliteColor",t),this.removePane()}});nicEditors.registerPlugin(nicPlugin,nicColorOptions);var nicImageOptions={buttons:{image:{name:"Add Image",type:"nicImageButton",tags:["IMG"]}}},nicImageButton=nicEditorAdvancedButton.extend({addPane:function(){this.im=this.ne.selectedInstance.selElm().parentTag("IMG"),this.addForm({"":{type:"title",txt:"Add/Edit Image"},src:{type:"text",txt:"URL",value:"http://",style:{width:"150px"}},alt:{type:"text",txt:"Alt Text",style:{width:"100px"}},align:{type:"select",txt:"Align",options:{none:"Default",left:"Left",right:"Right"}}},this.im)},submit:function(t){var e=this.inputs.src.value;if(""==e||"http://"==e)return alert("You must enter a Image URL to insert"),!1;if(this.removePane(),!this.im){var n="javascript:nicImTemp();";this.ne.nicCommand("insertImage",n),this.im=this.findElm("IMG","src",n)}this.im&&this.im.setAttributes({src:this.inputs.src.value,alt:this.inputs.alt.value,align:this.inputs.align.value})}});nicEditors.registerPlugin(nicPlugin,nicImageOptions);var nicSaveOptions={buttons:{save:{name:__("Save this content"),type:"nicEditorSaveButton"}}},nicEditorSaveButton=nicEditorButton.extend({init:function(){this.ne.options.onSave||this.margin.setStyle({display:"none"})},mouseClick:function(){var t=this.ne.options.onSave,e=this.ne.selectedInstance;t(e.getContent(),e.elm.id,e)}});nicEditors.registerPlugin(nicPlugin,nicSaveOptions);var nicXHTML=bkClass.extend({stripAttributes:["_moz_dirty","_moz_resizing","_extended"],noShort:["style","title","script","textarea","a"],cssReplace:{"font-weight:bold;":"strong","font-style:italic;":"em"},sizes:{1:"xx-small",2:"x-small",3:"small",4:"medium",5:"large",6:"x-large"},construct:function(t){this.ne=t,this.ne.options.xhtml&&t.addEvent("get",this.cleanup.closure(this))},cleanup:function(t){var e=t.getElm(),n=this.toXHTML(e);t.content=n},toXHTML:function(t,e,n){var i="",s="",o="",a=t.nodeType,r=t.nodeName.toLowerCase(),l=t.hasChildNodes&&t.hasChildNodes(),c=new Array;switch(a){case 1:var d=t.attributes;switch(r){case"b":r="strong";break;case"i":r="em";break;case"font":r="span"}if(e){for(var h=0;h<d.length;h++){var u=d[h],p=u.nodeName.toLowerCase(),m=u.nodeValue;if(u.specified&&m&&!bkLib.inArray(this.stripAttributes,p)&&"function"!=typeof m){switch(p){case"style":var f=m.replace(/ /g,"");for(itm in this.cssReplace)-1!=f.indexOf(itm)&&(c.push(this.cssReplace[itm]),f=f.replace(itm,""));o+=f,m="";break;case"class":m=m.replace("Apple-style-span","");break;case"size":o+="font-size:"+this.sizes[m]+";",m=""}m&&(s+=" "+p+'="'+m+'"')}}o&&(s+=' style="'+o+'"');for(h=0;h<c.length;h++)i+="<"+c[h]+">";""==s&&"span"==r&&(e=!1),e&&(i+="<"+r,"br"!=r&&(i+=s))}if(l||bkLib.inArray(this.noShort,p)){e&&(i+=">");for(h=0;h<t.childNodes.length;h++){var g=this.toXHTML(t.childNodes[h],!0,!0);g&&(i+=g)}}else e&&(i+=" />");e&&l&&(i+="</"+r+">");for(h=0;h<c.length;h++)i+="</"+c[h]+">";break;case 3:i+=t.nodeValue}return i}});nicEditors.registerPlugin(nicXHTML);var nicCodeOptions={buttons:{xhtml:{name:"Edit HTML",type:"nicCodeButton"}}},nicCodeButton=nicEditorAdvancedButton.extend({width:"350px",addPane:function(){this.addForm({"":{type:"title",txt:"Edit HTML"},code:{type:"content",value:this.ne.selectedInstance.getContent(),style:{width:"340px",height:"200px"}}})},submit:function(t){var e=this.inputs.code.value;this.ne.selectedInstance.setContent(e),this.removePane()}});nicEditors.registerPlugin(nicPlugin,nicCodeOptions);var nicBBCode=bkClass.extend({construct:function(t){if(this.ne=t,this.ne.options.bbCode){t.addEvent("get",this.bbGet.closure(this)),t.addEvent("set",this.bbSet.closure(this));var e=this.ne.loadedPlugins;for(itm in e)e[itm].toXHTML&&(this.xhtml=e[itm])}},bbGet:function(t){var e=this.xhtml.toXHTML(t.getElm());t.content=this.toBBCode(e)},bbSet:function(t){t.content=this.fromBBCode(t.content)},toBBCode:function(t){function e(e,n){t=t.replace(e,n)}return e(/\n/gi,""),e(/<strong>(.*?)<\/strong>/gi,"[b]$1[/b]"),e(/<em>(.*?)<\/em>/gi,"[i]$1[/i]"),e(/<span.*?style="text-decoration:underline;">(.*?)<\/span>/gi,"[u]$1[/u]"),e(/<ul>(.*?)<\/ul>/gi,"[list]$1[/list]"),e(/<li>(.*?)<\/li>/gi,"[*]$1[]"),e(/<ol>(.*?)<\/ol>/gi,"[list=1]$1[/list]"),e(/<img.*?src="(.*?)".*?>/gi,"[img]$1[/img]"),e(/<a.*?href="(.*?)".*?>(.*?)<\/a>/gi,"[url=$1]$2[/url]"),e(/<br.*?>/gi,"\n"),e(/<.*?>.*?<\/.*?>/gi,""),t},fromBBCode:function(t){function e(e,n){t=t.replace(e,n)}return e(/\[b\](.*?)\[\/b\]/gi,"<strong>$1</strong>"),e(/\[i\](.*?)\[\/i\]/gi,"<em>$1</em>"),e(/\[u\](.*?)\[\/u\]/gi,'<span style="text-decoration:underline;">$1</span>'),e(/\[list\](.*?)\[\/list\]/gi,"<ul>$1</ul>"),e(/\[list=1\](.*?)\[\/list\]/gi,"<ol>$1</ol>"),e(/\[\*\](.*?)\[\/\*\]/gi,"<li>$1</li>"),e(/\[img\](.*?)\[\/img\]/gi,'<img src="$1" />'),e(/\[url=(.*?)\](.*?)\[\/url\]/gi,'<a href="$1">$2</a>'),e(/\n/gi,"<br />"),t}});nicEditors.registerPlugin(nicBBCode);var nicUploadOptions={buttons:{upload:{name:"Upload Image",type:"nicUploadButton"}}},nicUploadButton=nicEditorAdvancedButton.extend({nicURI:"https://api.imgur.com/3/image",errorText:"Failed to upload image",addPane:function(){if(void 0===window.FormData)return this.onError("Image uploads are not supported in this browser, use Chrome, Firefox, or Safari instead.");this.im=this.ne.selectedInstance.selElm().parentTag("IMG");var t=new bkElement("div").setStyle({padding:"10px"}).appendTo(this.pane.pane);new bkElement("div").setStyle({fontSize:"14px",fontWeight:"bold",paddingBottom:"5px"}).setContent("Insert an Image").appendTo(t),this.fileInput=new bkElement("input").setAttributes({type:"file"}).appendTo(t),this.progress=new bkElement("progress").setStyle({width:"100%",display:"none"}).setAttributes("max",100).appendTo(t),this.fileInput.onchange=this.uploadFile.closure(this)},onError:function(t){this.removePane(),alert(t||"Failed to upload image")},uploadFile:function(){var t=this.fileInput.files[0];if(t&&t.type.match(/image.*/)){this.fileInput.setStyle({display:"none"}),this.setProgress(0);var e=new FormData;e.append("image",t);var n=new XMLHttpRequest;n.open("POST",this.ne.options.uploadURI||this.nicURI),n.onload=function(){try{var t=JSON.parse(n.responseText).data}catch(t){return this.onError()}if(t.error)return this.onError(t.error);this.onUploaded(t)}.closure(this),n.onerror=this.onError.closure(this),n.upload.onprogress=function(t){this.setProgress(t.loaded/t.total)}.closure(this),n.setRequestHeader("Authorization","Client-ID c37fc05199a05b7"),n.send(e)}else this.onError("Only image files can be uploaded")},setProgress:function(t){this.progress.setStyle({display:"block"}),t<.98?this.progress.value=t:this.progress.removeAttribute("value")},onUploaded:function(t){this.removePane();var e=t.link;if(!this.im){this.ne.selectedInstance.restoreRng();this.ne.nicCommand("insertImage",e),this.im=this.findElm("IMG","src",e)}var n=parseInt(this.ne.selectedInstance.elm.getStyle("width"));this.im&&this.im.setAttributes({src:e,width:n&&t.width?Math.min(n,t.width):""})}});nicEditors.registerPlugin(nicPlugin,nicUploadOptions);
var slice=[].slice;!function(t,n){var r;n.Starrr=r=function(){function n(n,r){var s;(this.options=t.extend({},this.defaults,r),this.$el=n,this.createStars(),this.syncRating(),this.options.readOnly)||(this.$el.on("mouseover.starrr","a",(s=this,function(t){return s.syncRating(s.getStars().index(t.currentTarget)+1)})),this.$el.on("mouseout.starrr",function(t){return function(){return t.syncRating()}}(this)),this.$el.on("click.starrr","a",function(t){return function(n){return n.preventDefault(),t.setRating(t.getStars().index(n.currentTarget)+1)}}(this)),this.$el.on("starrr:change",this.options.change))}return n.prototype.defaults={rating:void 0,max:5,readOnly:!1,emptyClass:"fa fa-star-o",fullClass:"fa fa-star",change:function(t,n){}},n.prototype.getStars=function(){return this.$el.find("a")},n.prototype.createStars=function(){var t,n,r;for(r=[],t=1,n=this.options.max;1<=n?t<=n:t>=n;1<=n?t++:t--)r.push(this.$el.append("<a href='#' />"));return r},n.prototype.setRating=function(t){return this.options.rating===t&&(t=void 0),this.options.rating=t,this.syncRating(),this.$el.trigger("starrr:change",t)},n.prototype.getRating=function(){return this.options.rating},n.prototype.syncRating=function(t){var n,r,s,i,e;for(t||(t=this.options.rating),n=this.getStars(),e=[],r=s=1,i=this.options.max;1<=i?s<=i:s>=i;r=1<=i?++s:--s)e.push(n.eq(r-1).removeClass(t>=r?this.options.emptyClass:this.options.fullClass).addClass(t>=r?this.options.fullClass:this.options.emptyClass));return e},n}(),t.fn.extend({starrr:function(){var n,s;return s=arguments[0],n=2<=arguments.length?slice.call(arguments,1):[],this.each(function(){var i;if((i=t(this).data("starrr"))||t(this).data("starrr",i=new r(t(this),s)),"string"==typeof s)return i[s].apply(i,n)})}})}(window.jQuery,window);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5pY2UtZWRpdC5qcyIsInN0YXJyci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBIiwiZmlsZSI6InZlbmRvcl9zY3JpcHRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGJrRXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzO2Zvcih2YXIgZSBpbiAxPT10Lmxlbmd0aCYmKHQ9W3RoaXMsdFswXV0pLHRbMV0pdFswXVtlXT10WzFdW2VdO3JldHVybiB0WzBdfTtmdW5jdGlvbiBia0NsYXNzKCl7fWJrQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdD1mdW5jdGlvbigpe30sYmtDbGFzcy5leHRlbmQ9ZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oKXtpZihhcmd1bWVudHNbMF0hPT1ia0NsYXNzKXJldHVybiB0aGlzLmNvbnN0cnVjdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LG49bmV3IHRoaXMoYmtDbGFzcyk7cmV0dXJuIGJrRXh0ZW5kKG4sdCksZS5wcm90b3R5cGU9bixlLmV4dGVuZD10aGlzLmV4dGVuZCxlfTt2YXIgYmtFbGVtZW50PWJrQ2xhc3MuZXh0ZW5kKHtjb25zdHJ1Y3Q6ZnVuY3Rpb24odCxlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdCYmKHQ9KGV8fGRvY3VtZW50KS5jcmVhdGVFbGVtZW50KHQpKSx0PSRCSyh0KX0sYXBwZW5kVG86ZnVuY3Rpb24odCl7cmV0dXJuIHQuYXBwZW5kQ2hpbGQodGhpcyksdGhpc30sYXBwZW5kQmVmb3JlOmZ1bmN0aW9uKHQpe3JldHVybiB0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMsdCksdGhpc30sYWRkRXZlbnQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gYmtMaWIuYWRkRXZlbnQodGhpcyx0LGUpLHRoaXN9LHNldENvbnRlbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaW5uZXJIVE1MPXQsdGhpc30scG9zOmZ1bmN0aW9uKCl7dmFyIHQ9Y3VydG9wPTA7b2JqPXRoaXM7aWYob2JqLm9mZnNldFBhcmVudClkb3t0Kz1vYmoub2Zmc2V0TGVmdCxjdXJ0b3ArPW9iai5vZmZzZXRUb3B9d2hpbGUob2JqPW9iai5vZmZzZXRQYXJlbnQpO3ZhciBlPXdpbmRvdy5vcGVyYT8wOnBhcnNlSW50KHRoaXMuZ2V0U3R5bGUoXCJib3JkZXItd2lkdGhcIil8fHRoaXMuc3R5bGUuYm9yZGVyKXx8MDtyZXR1cm5bdCtlLGN1cnRvcCtlK3RoaXMub2Zmc2V0SGVpZ2h0XX0sbm9TZWxlY3Q6ZnVuY3Rpb24oKXtyZXR1cm4gYmtMaWIubm9TZWxlY3QodGhpcyksdGhpc30scGFyZW50VGFnOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7ZG97aWYoZSYmZS5ub2RlTmFtZSYmZS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpPT10KXJldHVybiBlO2U9ZS5wYXJlbnROb2RlfXdoaWxlKGUpO3JldHVybiExfSxoYXNDbGFzczpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jbGFzc05hbWUubWF0Y2gobmV3IFJlZ0V4cChcIihcXFxcc3xeKW5pY0VkaXQtXCIrdCtcIihcXFxcc3wkKVwiKSl9LGFkZENsYXNzOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhhc0NsYXNzKHQpfHwodGhpcy5jbGFzc05hbWUrPVwiIG5pY0VkaXQtXCIrdCksdGhpc30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaGFzQ2xhc3ModCkmJih0aGlzLmNsYXNzTmFtZT10aGlzLmNsYXNzTmFtZS5yZXBsYWNlKG5ldyBSZWdFeHAoXCIoXFxcXHN8XiluaWNFZGl0LVwiK3QrXCIoXFxcXHN8JClcIiksXCIgXCIpKSx0aGlzfSxzZXRTdHlsZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnN0eWxlO2Zvcih2YXIgbiBpbiB0KXN3aXRjaChuKXtjYXNlXCJmbG9hdFwiOmUuY3NzRmxvYXQ9ZS5zdHlsZUZsb2F0PXRbbl07YnJlYWs7Y2FzZVwib3BhY2l0eVwiOmUub3BhY2l0eT10W25dLGUuZmlsdGVyPVwiYWxwaGEob3BhY2l0eT1cIitNYXRoLnJvdW5kKDEwMCp0W25dKStcIilcIjticmVhaztjYXNlXCJjbGFzc05hbWVcIjp0aGlzLmNsYXNzTmFtZT10W25dO2JyZWFrO2RlZmF1bHQ6ZVtuXT10W25dfXJldHVybiB0aGlzfSxnZXRTdHlsZTpmdW5jdGlvbih0LGUpe3ZhciBuPWV8fGRvY3VtZW50LmRlZmF1bHRWaWV3O2lmKDE9PXRoaXMubm9kZVR5cGUpcmV0dXJuIG4mJm4uZ2V0Q29tcHV0ZWRTdHlsZT9uLmdldENvbXB1dGVkU3R5bGUodGhpcyxudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKHQpOnRoaXMuY3VycmVudFN0eWxlW2JrTGliLmNhbWVsaXplKHQpXX0scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzKSx0aGlzfSxzZXRBdHRyaWJ1dGVzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0KXRoaXNbZV09dFtlXTtyZXR1cm4gdGhpc319KSxia0xpYj17aXNNU0lFOi0xIT1uYXZpZ2F0b3IuYXBwVmVyc2lvbi5pbmRleE9mKFwiTVNJRVwiKSxhZGRFdmVudDpmdW5jdGlvbih0LGUsbil7dC5hZGRFdmVudExpc3RlbmVyP3QuYWRkRXZlbnRMaXN0ZW5lcihlLG4sITEpOnQuYXR0YWNoRXZlbnQoXCJvblwiK2Usbil9LHRvQXJyYXk6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQubGVuZ3RoLG49bmV3IEFycmF5KGUpO2UtLTspbltlXT10W2VdO3JldHVybiBufSxub1NlbGVjdDpmdW5jdGlvbih0KXt0LnNldEF0dHJpYnV0ZSYmXCJpbnB1dFwiIT10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJlwidGV4dGFyZWFcIiE9dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiZ0LnNldEF0dHJpYnV0ZShcInVuc2VsZWN0YWJsZVwiLFwib25cIik7Zm9yKHZhciBlPTA7ZTx0LmNoaWxkTm9kZXMubGVuZ3RoO2UrKylia0xpYi5ub1NlbGVjdCh0LmNoaWxkTm9kZXNbZV0pfSxjYW1lbGl6ZTpmdW5jdGlvbih0KXtyZXR1cm4gdC5yZXBsYWNlKC9cXC0oLikvZyxmdW5jdGlvbih0LGUpe3JldHVybiBlLnRvVXBwZXJDYXNlKCl9KX0saW5BcnJheTpmdW5jdGlvbih0LGUpe3JldHVybiBudWxsIT1ia0xpYi5zZWFyY2godCxlKX0sc2VhcmNoOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYodFtuXT09ZSlyZXR1cm4gbjtyZXR1cm4gbnVsbH0sY2FuY2VsRXZlbnQ6ZnVuY3Rpb24odCl7cmV0dXJuKHQ9dHx8d2luZG93LmV2ZW50KS5wcmV2ZW50RGVmYXVsdCYmdC5zdG9wUHJvcGFnYXRpb24mJih0LnByZXZlbnREZWZhdWx0KCksdC5zdG9wUHJvcGFnYXRpb24oKSksITF9LGRvbUxvYWQ6W10sZG9tTG9hZGVkOmZ1bmN0aW9uKCl7aWYoIWFyZ3VtZW50cy5jYWxsZWUuZG9uZSlmb3IoYXJndW1lbnRzLmNhbGxlZS5kb25lPSEwLGk9MDtpPGJrTGliLmRvbUxvYWQubGVuZ3RoO2krKylia0xpYi5kb21Mb2FkW2ldKCl9LG9uRG9tTG9hZGVkOmZ1bmN0aW9uKHQpe3RoaXMuZG9tTG9hZC5wdXNoKHQpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXI/ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixia0xpYi5kb21Mb2FkZWQsbnVsbCk6YmtMaWIuaXNNU0lFJiYoZG9jdW1lbnQud3JpdGUoXCI8c3R5bGU+Lm5pY0VkaXQtbWFpbiBwIHsgbWFyZ2luOiAwOyB9PC9zdHlsZT48c2NyaXB0IGlkPV9faWVfb25sb2FkIGRlZmVyIFwiKyhcImh0dHBzOlwiPT1sb2NhdGlvbi5wcm90b2NvbD9cInNyYz0namF2YXNjcmlwdDp2b2lkKDApJ1wiOlwic3JjPS8vMFwiKStcIj48XFwvc2NyaXB0PlwiKSwkQksoXCJfX2llX29ubG9hZFwiKS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtcImNvbXBsZXRlXCI9PXRoaXMucmVhZHlTdGF0ZSYmYmtMaWIuZG9tTG9hZGVkKCl9KSx3aW5kb3cub25sb2FkPWJrTGliLmRvbUxvYWRlZH19O2Z1bmN0aW9uICRCSyh0KXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdCYmKHQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodCkpLHQmJiF0LmFwcGVuZFRvP2JrRXh0ZW5kKHQsYmtFbGVtZW50LnByb3RvdHlwZSk6dH12YXIgYmtFdmVudD17YWRkRXZlbnQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gZSYmKHRoaXMuZXZlbnRMaXN0PXRoaXMuZXZlbnRMaXN0fHx7fSx0aGlzLmV2ZW50TGlzdFt0XT10aGlzLmV2ZW50TGlzdFt0XXx8W10sdGhpcy5ldmVudExpc3RbdF0ucHVzaChlKSksdGhpc30sZmlyZUV2ZW50OmZ1bmN0aW9uKCl7dmFyIHQ9YmtMaWIudG9BcnJheShhcmd1bWVudHMpLGU9dC5zaGlmdCgpO2lmKHRoaXMuZXZlbnRMaXN0JiZ0aGlzLmV2ZW50TGlzdFtlXSlmb3IodmFyIG49MDtuPHRoaXMuZXZlbnRMaXN0W2VdLmxlbmd0aDtuKyspdGhpcy5ldmVudExpc3RbZV1bbl0uYXBwbHkodGhpcyx0KX19O2Z1bmN0aW9uIF9fKHQpe3JldHVybiB0fUZ1bmN0aW9uLnByb3RvdHlwZS5jbG9zdXJlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPWJrTGliLnRvQXJyYXkoYXJndW1lbnRzKSxuPWUuc2hpZnQoKTtyZXR1cm4gZnVuY3Rpb24oKXtpZih2b2lkIDAhPT1ia0xpYilyZXR1cm4gdC5hcHBseShuLGUuY29uY2F0KGJrTGliLnRvQXJyYXkoYXJndW1lbnRzKSkpfX0sRnVuY3Rpb24ucHJvdG90eXBlLmNsb3N1cmVMaXN0ZW5lcj1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT1ia0xpYi50b0FycmF5KGFyZ3VtZW50cyksbj1lLnNoaWZ0KCk7cmV0dXJuIGZ1bmN0aW9uKGkpe2lmKChpPWl8fHdpbmRvdy5ldmVudCkudGFyZ2V0KXZhciBzPWkudGFyZ2V0O2Vsc2Ugcz1pLnNyY0VsZW1lbnQ7cmV0dXJuIHQuYXBwbHkobixbaSxzXS5jb25jYXQoZSkpfX07dmFyIG5pY0VkaXRvckNvbmZpZz1ia0NsYXNzLmV4dGVuZCh7YnV0dG9uczp7Ym9sZDp7bmFtZTpfXyhcIkNsaWNrIHRvIEJvbGRcIiksY29tbWFuZDpcIkJvbGRcIix0YWdzOltcIkJcIixcIlNUUk9OR1wiXSxjc3M6e1wiZm9udC13ZWlnaHRcIjpcImJvbGRcIn0sa2V5OlwiYlwifSxpdGFsaWM6e25hbWU6X18oXCJDbGljayB0byBJdGFsaWNcIiksY29tbWFuZDpcIkl0YWxpY1wiLHRhZ3M6W1wiRU1cIixcIklcIl0sY3NzOntcImZvbnQtc3R5bGVcIjpcIml0YWxpY1wifSxrZXk6XCJpXCJ9LHVuZGVybGluZTp7bmFtZTpfXyhcIkNsaWNrIHRvIFVuZGVybGluZVwiKSxjb21tYW5kOlwiVW5kZXJsaW5lXCIsdGFnczpbXCJVXCJdLGNzczp7XCJ0ZXh0LWRlY29yYXRpb25cIjpcInVuZGVybGluZVwifSxrZXk6XCJ1XCJ9LGxlZnQ6e25hbWU6X18oXCJMZWZ0IEFsaWduXCIpLGNvbW1hbmQ6XCJqdXN0aWZ5bGVmdFwiLG5vQWN0aXZlOiEwfSxjZW50ZXI6e25hbWU6X18oXCJDZW50ZXIgQWxpZ25cIiksY29tbWFuZDpcImp1c3RpZnljZW50ZXJcIixub0FjdGl2ZTohMH0scmlnaHQ6e25hbWU6X18oXCJSaWdodCBBbGlnblwiKSxjb21tYW5kOlwianVzdGlmeXJpZ2h0XCIsbm9BY3RpdmU6ITB9LGp1c3RpZnk6e25hbWU6X18oXCJKdXN0aWZ5IEFsaWduXCIpLGNvbW1hbmQ6XCJqdXN0aWZ5ZnVsbFwiLG5vQWN0aXZlOiEwfSxvbDp7bmFtZTpfXyhcIkluc2VydCBPcmRlcmVkIExpc3RcIiksY29tbWFuZDpcImluc2VydG9yZGVyZWRsaXN0XCIsdGFnczpbXCJPTFwiXX0sdWw6e25hbWU6X18oXCJJbnNlcnQgVW5vcmRlcmVkIExpc3RcIiksY29tbWFuZDpcImluc2VydHVub3JkZXJlZGxpc3RcIix0YWdzOltcIlVMXCJdfSxzdWJzY3JpcHQ6e25hbWU6X18oXCJDbGljayB0byBTdWJzY3JpcHRcIiksY29tbWFuZDpcInN1YnNjcmlwdFwiLHRhZ3M6W1wiU1VCXCJdfSxzdXBlcnNjcmlwdDp7bmFtZTpfXyhcIkNsaWNrIHRvIFN1cGVyc2NyaXB0XCIpLGNvbW1hbmQ6XCJzdXBlcnNjcmlwdFwiLHRhZ3M6W1wiU1VQXCJdfSxzdHJpa2V0aHJvdWdoOntuYW1lOl9fKFwiQ2xpY2sgdG8gU3RyaWtlIFRocm91Z2hcIiksY29tbWFuZDpcInN0cmlrZVRocm91Z2hcIixjc3M6e1widGV4dC1kZWNvcmF0aW9uXCI6XCJsaW5lLXRocm91Z2hcIn19LHJlbW92ZWZvcm1hdDp7bmFtZTpfXyhcIlJlbW92ZSBGb3JtYXR0aW5nXCIpLGNvbW1hbmQ6XCJyZW1vdmVmb3JtYXRcIixub0FjdGl2ZTohMH0saW5kZW50OntuYW1lOl9fKFwiSW5kZW50IFRleHRcIiksY29tbWFuZDpcImluZGVudFwiLG5vQWN0aXZlOiEwfSxvdXRkZW50OntuYW1lOl9fKFwiUmVtb3ZlIEluZGVudFwiKSxjb21tYW5kOlwib3V0ZGVudFwiLG5vQWN0aXZlOiEwfSxocjp7bmFtZTpfXyhcIkhvcml6b250YWwgUnVsZVwiKSxjb21tYW5kOlwiaW5zZXJ0SG9yaXpvbnRhbFJ1bGVcIixub0FjdGl2ZTohMH19LGljb25zUGF0aDpcImh0dHA6Ly9qcy5uaWNlZGl0LmNvbS9uaWNFZGl0SWNvbnMtbGF0ZXN0LmdpZlwiLGJ1dHRvbkxpc3Q6W1wic2F2ZVwiLFwiYm9sZFwiLFwiaXRhbGljXCIsXCJ1bmRlcmxpbmVcIixcImxlZnRcIixcImNlbnRlclwiLFwicmlnaHRcIixcImp1c3RpZnlcIixcIm9sXCIsXCJ1bFwiLFwiZm9udFNpemVcIixcImZvbnRGYW1pbHlcIixcImZvbnRGb3JtYXRcIixcImluZGVudFwiLFwib3V0ZGVudFwiLFwiaW1hZ2VcIixcInVwbG9hZFwiLFwibGlua1wiLFwidW5saW5rXCIsXCJmb3JlY29sb3JcIixcImJnY29sb3JcIl0saWNvbkxpc3Q6e3hodG1sOjEsYmdjb2xvcjoyLGZvcmVjb2xvcjozLGJvbGQ6NCxjZW50ZXI6NSxocjo2LGluZGVudDo3LGl0YWxpYzo4LGp1c3RpZnk6OSxsZWZ0OjEwLG9sOjExLG91dGRlbnQ6MTIscmVtb3ZlZm9ybWF0OjEzLHJpZ2h0OjE0LHNhdmU6MjUsc3RyaWtldGhyb3VnaDoxNixzdWJzY3JpcHQ6MTcsc3VwZXJzY3JpcHQ6MTgsdWw6MTksdW5kZXJsaW5lOjIwLGltYWdlOjIxLGxpbms6MjIsdW5saW5rOjIzLGNsb3NlOjI0LGFycm93OjI2LHVwbG9hZDoyN319KSxuaWNFZGl0b3JzPXtuaWNQbHVnaW5zOltdLGVkaXRvcnM6W10scmVnaXN0ZXJQbHVnaW46ZnVuY3Rpb24odCxlKXt0aGlzLm5pY1BsdWdpbnMucHVzaCh7cDp0LG86ZX0pfSxhbGxUZXh0QXJlYXM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGV4dGFyZWFcIiksbj0wO248ZS5sZW5ndGg7bisrKW5pY0VkaXRvcnMuZWRpdG9ycy5wdXNoKG5ldyBuaWNFZGl0b3IodCkucGFuZWxJbnN0YW5jZShlW25dKSk7cmV0dXJuIG5pY0VkaXRvcnMuZWRpdG9yc30sZmluZEVkaXRvcjpmdW5jdGlvbih0KXtmb3IodmFyIGU9bmljRWRpdG9ycy5lZGl0b3JzLG49MDtuPGUubGVuZ3RoO24rKylpZihlW25dLmluc3RhbmNlQnlJZCh0KSlyZXR1cm4gZVtuXS5pbnN0YW5jZUJ5SWQodCl9fSxuaWNFZGl0b3I9YmtDbGFzcy5leHRlbmQoe2NvbnN0cnVjdDpmdW5jdGlvbih0KXt0aGlzLm9wdGlvbnM9bmV3IG5pY0VkaXRvckNvbmZpZyxia0V4dGVuZCh0aGlzLm9wdGlvbnMsdCksdGhpcy5uaWNJbnN0YW5jZXM9bmV3IEFycmF5LHRoaXMubG9hZGVkUGx1Z2lucz1uZXcgQXJyYXk7Zm9yKHZhciBlPW5pY0VkaXRvcnMubmljUGx1Z2lucyxuPTA7bjxlLmxlbmd0aDtuKyspdGhpcy5sb2FkZWRQbHVnaW5zLnB1c2gobmV3IGVbbl0ucCh0aGlzLGVbbl0ubykpO25pY0VkaXRvcnMuZWRpdG9ycy5wdXNoKHRoaXMpLGJrTGliLmFkZEV2ZW50KGRvY3VtZW50LmJvZHksXCJtb3VzZWRvd25cIix0aGlzLnNlbGVjdENoZWNrLmNsb3N1cmVMaXN0ZW5lcih0aGlzKSl9LHBhbmVsSW5zdGFuY2U6ZnVuY3Rpb24odCxlKXt0PXRoaXMuY2hlY2tSZXBsYWNlKCRCSyh0KSk7dmFyIG49bmV3IGJrRWxlbWVudChcIkRJVlwiKS5zZXRTdHlsZSh7d2lkdGg6KHBhcnNlSW50KHQuZ2V0U3R5bGUoXCJ3aWR0aFwiKSl8fHQuY2xpZW50V2lkdGgpK1wicHhcIn0pLmFwcGVuZEJlZm9yZSh0KTtyZXR1cm4gdGhpcy5zZXRQYW5lbChuKSx0aGlzLmFkZEluc3RhbmNlKHQsZSl9LGNoZWNrUmVwbGFjZTpmdW5jdGlvbih0KXt2YXIgZT1uaWNFZGl0b3JzLmZpbmRFZGl0b3IodCk7cmV0dXJuIGUmJihlLnJlbW92ZUluc3RhbmNlKHQpLGUucmVtb3ZlUGFuZWwoKSksdH0sYWRkSW5zdGFuY2U6ZnVuY3Rpb24odCxlKXtpZigodD10aGlzLmNoZWNrUmVwbGFjZSgkQksodCkpKS5jb250ZW50RWRpdGFibGV8fHdpbmRvdy5vcGVyYSl2YXIgbj1uZXcgbmljRWRpdG9ySW5zdGFuY2UodCxlLHRoaXMpO2Vsc2Ugbj1uZXcgbmljRWRpdG9ySUZyYW1lSW5zdGFuY2UodCxlLHRoaXMpO3JldHVybiB0aGlzLm5pY0luc3RhbmNlcy5wdXNoKG4pLHRoaXN9LHJlbW92ZUluc3RhbmNlOmZ1bmN0aW9uKHQpe3Q9JEJLKHQpO2Zvcih2YXIgZT10aGlzLm5pY0luc3RhbmNlcyxuPTA7bjxlLmxlbmd0aDtuKyspZVtuXS5lPT10JiYoZVtuXS5yZW1vdmUoKSx0aGlzLm5pY0luc3RhbmNlcy5zcGxpY2UobiwxKSl9LHJlbW92ZVBhbmVsOmZ1bmN0aW9uKHQpe3RoaXMubmljUGFuZWwmJih0aGlzLm5pY1BhbmVsLnJlbW92ZSgpLHRoaXMubmljUGFuZWw9bnVsbCl9LGluc3RhbmNlQnlJZDpmdW5jdGlvbih0KXt0PSRCSyh0KTtmb3IodmFyIGU9dGhpcy5uaWNJbnN0YW5jZXMsbj0wO248ZS5sZW5ndGg7bisrKWlmKGVbbl0uZT09dClyZXR1cm4gZVtuXX0sc2V0UGFuZWw6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubmljUGFuZWw9bmV3IG5pY0VkaXRvclBhbmVsKCRCSyh0KSx0aGlzLm9wdGlvbnMsdGhpcyksdGhpcy5maXJlRXZlbnQoXCJwYW5lbFwiLHRoaXMubmljUGFuZWwpLHRoaXN9LG5pY0NvbW1hbmQ6ZnVuY3Rpb24odCxlKXt0aGlzLnNlbGVjdGVkSW5zdGFuY2UmJnRoaXMuc2VsZWN0ZWRJbnN0YW5jZS5uaWNDb21tYW5kKHQsZSl9LGdldEljb246ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLm9wdGlvbnMuaWNvbkxpc3RbdF0saT1lLmljb25GaWxlcz9lLmljb25GaWxlc1t0XTpcIlwiO3JldHVybntiYWNrZ3JvdW5kSW1hZ2U6XCJ1cmwoJ1wiKyhuP3RoaXMub3B0aW9ucy5pY29uc1BhdGg6aSkrXCInKVwiLGJhY2tncm91bmRQb3NpdGlvbjoobj8tMTgqKG4tMSk6MCkrXCJweCAwcHhcIn19LHNlbGVjdENoZWNrOmZ1bmN0aW9uKHQsZSl7ZG97aWYoZS5jbGFzc05hbWUmJi0xIT1lLmNsYXNzTmFtZS5pbmRleE9mKFwibmljRWRpdFwiKSlyZXR1cm4hMX13aGlsZShlPWUucGFyZW50Tm9kZSk7cmV0dXJuIHRoaXMuZmlyZUV2ZW50KFwiYmx1clwiLHRoaXMuc2VsZWN0ZWRJbnN0YW5jZSxlKSx0aGlzLmxhc3RTZWxlY3RlZEluc3RhbmNlPXRoaXMuc2VsZWN0ZWRJbnN0YW5jZSx0aGlzLnNlbGVjdGVkSW5zdGFuY2U9bnVsbCwhMX19KTtuaWNFZGl0b3I9bmljRWRpdG9yLmV4dGVuZChia0V2ZW50KTt2YXIgbmljRWRpdG9ySW5zdGFuY2U9YmtDbGFzcy5leHRlbmQoe2lzU2VsZWN0ZWQ6ITEsY29uc3RydWN0OmZ1bmN0aW9uKHQsZSxuKXt0aGlzLm5lPW4sdGhpcy5lbG09dGhpcy5lPXQsdGhpcy5vcHRpb25zPWV8fHt9LG5ld1g9cGFyc2VJbnQodC5nZXRTdHlsZShcIndpZHRoXCIpKXx8dC5jbGllbnRXaWR0aCxuZXdZPXBhcnNlSW50KHQuZ2V0U3R5bGUoXCJoZWlnaHRcIikpfHx0LmNsaWVudEhlaWdodCx0aGlzLmluaXRpYWxIZWlnaHQ9bmV3WS04O3ZhciBpPVwidGV4dGFyZWFcIj09dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2lmKGl8fHRoaXMub3B0aW9ucy5oYXNQYW5lbCl7dmFyIHM9YmtMaWIuaXNNU0lFJiYhKHZvaWQgMCE9PWRvY3VtZW50LmJvZHkuc3R5bGUubWF4SGVpZ2h0JiZcIkNTUzFDb21wYXRcIj09ZG9jdW1lbnQuY29tcGF0TW9kZSksbz17d2lkdGg6bmV3WCtcInB4XCIsYm9yZGVyOlwiMXB4IHNvbGlkICNjY2NcIixib3JkZXJUb3A6MCxvdmVyZmxvd1k6XCJhdXRvXCIsb3ZlcmZsb3dYOlwiaGlkZGVuXCJ9O29bcz9cImhlaWdodFwiOlwibWF4SGVpZ2h0XCJdPXRoaXMubmUub3B0aW9ucy5tYXhIZWlnaHQ/dGhpcy5uZS5vcHRpb25zLm1heEhlaWdodCtcInB4XCI6bnVsbCx0aGlzLmVkaXRvckNvbnRhaW49bmV3IGJrRWxlbWVudChcIkRJVlwiKS5zZXRTdHlsZShvKS5hcHBlbmRCZWZvcmUodCk7dmFyIGE9bmV3IGJrRWxlbWVudChcIkRJVlwiKS5zZXRTdHlsZSh7d2lkdGg6bmV3WC04K1wicHhcIixtYXJnaW46XCI0cHhcIixtaW5IZWlnaHQ6bmV3WStcInB4XCJ9KS5hZGRDbGFzcyhcIm1haW5cIikuYXBwZW5kVG8odGhpcy5lZGl0b3JDb250YWluKTtpZih0LnNldFN0eWxlKHtkaXNwbGF5Olwibm9uZVwifSksYS5pbm5lckhUTUw9dC5pbm5lckhUTUwsaSl7YS5zZXRDb250ZW50KHQudmFsdWUpLHRoaXMuY29weUVsbT10O3ZhciByPXQucGFyZW50VGFnKFwiRk9STVwiKTtyJiZia0xpYi5hZGRFdmVudChyLFwic3VibWl0XCIsdGhpcy5zYXZlQ29udGVudC5jbG9zdXJlKHRoaXMpKX1hLnNldFN0eWxlKHM/e2hlaWdodDpuZXdZK1wicHhcIn06e292ZXJmbG93OlwiaGlkZGVuXCJ9KSx0aGlzLmVsbT1hfXRoaXMubmUuYWRkRXZlbnQoXCJibHVyXCIsdGhpcy5ibHVyLmNsb3N1cmUodGhpcykpLHRoaXMuaW5pdCgpLHRoaXMuYmx1cigpfSxpbml0OmZ1bmN0aW9uKCl7dGhpcy5lbG0uc2V0QXR0cmlidXRlKFwiY29udGVudEVkaXRhYmxlXCIsXCJ0cnVlXCIpLFwiXCI9PXRoaXMuZ2V0Q29udGVudCgpJiZ0aGlzLnNldENvbnRlbnQoXCI8YnIgLz5cIiksdGhpcy5pbnN0YW5jZURvYz1kb2N1bWVudC5kZWZhdWx0Vmlldyx0aGlzLmVsbS5hZGRFdmVudChcIm1vdXNlZG93blwiLHRoaXMuc2VsZWN0ZWQuY2xvc3VyZUxpc3RlbmVyKHRoaXMpKS5hZGRFdmVudChcImtleXByZXNzXCIsdGhpcy5rZXlEb3duLmNsb3N1cmVMaXN0ZW5lcih0aGlzKSkuYWRkRXZlbnQoXCJmb2N1c1wiLHRoaXMuc2VsZWN0ZWQuY2xvc3VyZSh0aGlzKSkuYWRkRXZlbnQoXCJibHVyXCIsdGhpcy5ibHVyLmNsb3N1cmUodGhpcykpLmFkZEV2ZW50KFwia2V5dXBcIix0aGlzLnNlbGVjdGVkLmNsb3N1cmUodGhpcykpLHRoaXMubmUuZmlyZUV2ZW50KFwiYWRkXCIsdGhpcyl9LHJlbW92ZTpmdW5jdGlvbigpe3RoaXMuc2F2ZUNvbnRlbnQoKSwodGhpcy5jb3B5RWxtfHx0aGlzLm9wdGlvbnMuaGFzUGFuZWwpJiYodGhpcy5lZGl0b3JDb250YWluLnJlbW92ZSgpLHRoaXMuZS5zZXRTdHlsZSh7ZGlzcGxheTpcImJsb2NrXCJ9KSx0aGlzLm5lLnJlbW92ZVBhbmVsKCkpLHRoaXMuZGlzYWJsZSgpLHRoaXMubmUuZmlyZUV2ZW50KFwicmVtb3ZlXCIsdGhpcyl9LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLmVsbS5zZXRBdHRyaWJ1dGUoXCJjb250ZW50RWRpdGFibGVcIixcImZhbHNlXCIpfSxnZXRTZWw6ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93LmdldFNlbGVjdGlvbj93aW5kb3cuZ2V0U2VsZWN0aW9uKCk6ZG9jdW1lbnQuc2VsZWN0aW9ufSxnZXRSbmc6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldFNlbCgpO2lmKHQmJjAhPT10LnJhbmdlQ291bnQpcmV0dXJuIHQucmFuZ2VDb3VudD4wP3QuZ2V0UmFuZ2VBdCgwKTp0LmNyZWF0ZVJhbmdlKCl9LHNlbFJuZzpmdW5jdGlvbih0LGUpe3dpbmRvdy5nZXRTZWxlY3Rpb24/KGUucmVtb3ZlQWxsUmFuZ2VzKCksZS5hZGRSYW5nZSh0KSk6dC5zZWxlY3QoKX0sc2VsRWxtOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRSbmcoKTtpZih0KXtpZih0LnN0YXJ0Q29udGFpbmVyKXt2YXIgZT10LnN0YXJ0Q29udGFpbmVyO2lmKDE9PXQuY2xvbmVDb250ZW50cygpLmNoaWxkTm9kZXMubGVuZ3RoKWZvcih2YXIgbj0wO248ZS5jaGlsZE5vZGVzLmxlbmd0aDtuKyspe3ZhciBpPWUuY2hpbGROb2Rlc1tuXS5vd25lckRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7aWYoaS5zZWxlY3ROb2RlKGUuY2hpbGROb2Rlc1tuXSksMSE9dC5jb21wYXJlQm91bmRhcnlQb2ludHMoUmFuZ2UuU1RBUlRfVE9fU1RBUlQsaSkmJi0xIT10LmNvbXBhcmVCb3VuZGFyeVBvaW50cyhSYW5nZS5FTkRfVE9fRU5ELGkpKXJldHVybiAkQksoZS5jaGlsZE5vZGVzW25dKX1yZXR1cm4gJEJLKGUpfXJldHVybiAkQksoXCJDb250cm9sXCI9PXRoaXMuZ2V0U2VsKCkudHlwZT90Lml0ZW0oMCk6dC5wYXJlbnRFbGVtZW50KCkpfX0sc2F2ZVJuZzpmdW5jdGlvbigpe3RoaXMuc2F2ZWRSYW5nZT10aGlzLmdldFJuZygpLHRoaXMuc2F2ZWRTZWw9dGhpcy5nZXRTZWwoKX0scmVzdG9yZVJuZzpmdW5jdGlvbigpe3RoaXMuc2F2ZWRSYW5nZSYmdGhpcy5zZWxSbmcodGhpcy5zYXZlZFJhbmdlLHRoaXMuc2F2ZWRTZWwpfSxrZXlEb3duOmZ1bmN0aW9uKHQsZSl7dC5jdHJsS2V5JiZ0aGlzLm5lLmZpcmVFdmVudChcImtleVwiLHRoaXMsdCl9LHNlbGVjdGVkOmZ1bmN0aW9uKHQsZSl7aWYoZXx8KGU9dGhpcy5zZWxFbG0pfHwoZT10aGlzLnNlbEVsbSgpKSwhdC5jdHJsS2V5KXt2YXIgbj10aGlzLm5lLnNlbGVjdGVkSW5zdGFuY2U7biE9dGhpcyYmKG4mJnRoaXMubmUuZmlyZUV2ZW50KFwiYmx1clwiLG4sZSksdGhpcy5uZS5zZWxlY3RlZEluc3RhbmNlPXRoaXMsdGhpcy5uZS5maXJlRXZlbnQoXCJmb2N1c1wiLG4sZSkpLHRoaXMubmUuZmlyZUV2ZW50KFwic2VsZWN0ZWRcIixuLGUpLHRoaXMuaXNGb2N1c2VkPSEwLHRoaXMuZWxtLmFkZENsYXNzKFwic2VsZWN0ZWRcIil9cmV0dXJuITF9LGJsdXI6ZnVuY3Rpb24oKXt0aGlzLmlzRm9jdXNlZD0hMSx0aGlzLmVsbS5yZW1vdmVDbGFzcyhcInNlbGVjdGVkXCIpfSxzYXZlQ29udGVudDpmdW5jdGlvbigpeyh0aGlzLmNvcHlFbG18fHRoaXMub3B0aW9ucy5oYXNQYW5lbCkmJih0aGlzLm5lLmZpcmVFdmVudChcInNhdmVcIix0aGlzKSx0aGlzLmNvcHlFbG0/dGhpcy5jb3B5RWxtLnZhbHVlPXRoaXMuZ2V0Q29udGVudCgpOnRoaXMuZS5pbm5lckhUTUw9dGhpcy5nZXRDb250ZW50KCkpfSxnZXRFbG06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbG19LGdldENvbnRlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50PXRoaXMuZ2V0RWxtKCkuaW5uZXJIVE1MLHRoaXMubmUuZmlyZUV2ZW50KFwiZ2V0XCIsdGhpcyksdGhpcy5jb250ZW50fSxzZXRDb250ZW50OmZ1bmN0aW9uKHQpe3RoaXMuY29udGVudD10LHRoaXMubmUuZmlyZUV2ZW50KFwic2V0XCIsdGhpcyksdGhpcy5lbG0uaW5uZXJIVE1MPXRoaXMuY29udGVudH0sbmljQ29tbWFuZDpmdW5jdGlvbih0LGUpe2RvY3VtZW50LmV4ZWNDb21tYW5kKHQsITEsZSl9fSksbmljRWRpdG9ySUZyYW1lSW5zdGFuY2U9bmljRWRpdG9ySW5zdGFuY2UuZXh0ZW5kKHtzYXZlZFN0eWxlczpbXSxpbml0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5lbG0uaW5uZXJIVE1MLnJlcGxhY2UoL15cXHMrfFxccyskL2csXCJcIik7dGhpcy5lbG0uaW5uZXJIVE1MPVwiXCIsdHx8KHQ9XCI8YnIgLz5cIiksdGhpcy5pbml0aWFsQ29udGVudD10LHRoaXMuZWxtRnJhbWU9bmV3IGJrRWxlbWVudChcImlmcmFtZVwiKS5zZXRBdHRyaWJ1dGVzKHtzcmM6XCJqYXZhc2NyaXB0OjtcIixmcmFtZUJvcmRlcjowLGFsbG93VHJhbnNwYXJlbmN5OlwidHJ1ZVwiLHNjcm9sbGluZzpcIm5vXCJ9KS5zZXRTdHlsZSh7aGVpZ2h0OlwiMTAwcHhcIix3aWR0aDpcIjEwMCVcIn0pLmFkZENsYXNzKFwiZnJhbWVcIikuYXBwZW5kVG8odGhpcy5lbG0pLHRoaXMuY29weUVsbSYmdGhpcy5lbG1GcmFtZS5zZXRTdHlsZSh7d2lkdGg6dGhpcy5lbG0ub2Zmc2V0V2lkdGgtNCtcInB4XCJ9KTtmb3IoaXRtIGluW1wiZm9udC1zaXplXCIsXCJmb250LWZhbWlseVwiLFwiZm9udC13ZWlnaHRcIixcImNvbG9yXCJdKXRoaXMuc2F2ZWRTdHlsZXNbYmtMaWIuY2FtZWxpemUoaXRtKV09dGhpcy5lbG0uZ2V0U3R5bGUoaXRtKTtzZXRUaW1lb3V0KHRoaXMuaW5pdEZyYW1lLmNsb3N1cmUodGhpcyksNTApfSxkaXNhYmxlOmZ1bmN0aW9uKCl7dGhpcy5lbG0uaW5uZXJIVE1MPXRoaXMuZ2V0Q29udGVudCgpfSxpbml0RnJhbWU6ZnVuY3Rpb24oKXt2YXIgdD0kQksodGhpcy5lbG1GcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50KTt0LmRlc2lnbk1vZGU9XCJvblwiLHQub3BlbigpO3ZhciBlPXRoaXMubmUub3B0aW9ucy5leHRlcm5hbENTUzt0LndyaXRlKFwiPGh0bWw+PGhlYWQ+XCIrKGU/JzxsaW5rIGhyZWY9XCInK2UrJ1wiIHJlbD1cInN0eWxlc2hlZXRcIiB0eXBlPVwidGV4dC9jc3NcIiAvPic6XCJcIikrJzwvaGVhZD48Ym9keSBpZD1cIm5pY0VkaXRDb250ZW50XCIgc3R5bGU9XCJtYXJnaW46IDAgIWltcG9ydGFudDsgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDtcIj4nK3RoaXMuaW5pdGlhbENvbnRlbnQrXCI8L2JvZHk+PC9odG1sPlwiKSx0LmNsb3NlKCksdGhpcy5mcmFtZURvYz10LHRoaXMuZnJhbWVXaW49JEJLKHRoaXMuZWxtRnJhbWUuY29udGVudFdpbmRvdyksdGhpcy5mcmFtZUNvbnRlbnQ9JEJLKHRoaXMuZnJhbWVXaW4uZG9jdW1lbnQuYm9keSkuc2V0U3R5bGUodGhpcy5zYXZlZFN0eWxlcyksdGhpcy5pbnN0YW5jZURvYz10aGlzLmZyYW1lV2luLmRvY3VtZW50LmRlZmF1bHRWaWV3LHRoaXMuaGVpZ2h0VXBkYXRlKCksdGhpcy5mcmFtZURvYy5hZGRFdmVudChcIm1vdXNlZG93blwiLHRoaXMuc2VsZWN0ZWQuY2xvc3VyZUxpc3RlbmVyKHRoaXMpKS5hZGRFdmVudChcImtleXVwXCIsdGhpcy5oZWlnaHRVcGRhdGUuY2xvc3VyZUxpc3RlbmVyKHRoaXMpKS5hZGRFdmVudChcImtleWRvd25cIix0aGlzLmtleURvd24uY2xvc3VyZUxpc3RlbmVyKHRoaXMpKS5hZGRFdmVudChcImtleXVwXCIsdGhpcy5zZWxlY3RlZC5jbG9zdXJlKHRoaXMpKSx0aGlzLm5lLmZpcmVFdmVudChcImFkZFwiLHRoaXMpfSxnZXRFbG06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mcmFtZUNvbnRlbnR9LHNldENvbnRlbnQ6ZnVuY3Rpb24odCl7dGhpcy5jb250ZW50PXQsdGhpcy5uZS5maXJlRXZlbnQoXCJzZXRcIix0aGlzKSx0aGlzLmZyYW1lQ29udGVudC5pbm5lckhUTUw9dGhpcy5jb250ZW50LHRoaXMuaGVpZ2h0VXBkYXRlKCl9LGdldFNlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZyYW1lV2luP3RoaXMuZnJhbWVXaW4uZ2V0U2VsZWN0aW9uKCk6dGhpcy5mcmFtZURvYy5zZWxlY3Rpb259LGhlaWdodFVwZGF0ZTpmdW5jdGlvbigpe3RoaXMuZWxtRnJhbWUuc3R5bGUuaGVpZ2h0PU1hdGgubWF4KHRoaXMuZnJhbWVDb250ZW50Lm9mZnNldEhlaWdodCx0aGlzLmluaXRpYWxIZWlnaHQpK1wicHhcIn0sbmljQ29tbWFuZDpmdW5jdGlvbih0LGUpe3RoaXMuZnJhbWVEb2MuZXhlY0NvbW1hbmQodCwhMSxlKSxzZXRUaW1lb3V0KHRoaXMuaGVpZ2h0VXBkYXRlLmNsb3N1cmUodGhpcyksMTAwKX19KSxuaWNFZGl0b3JQYW5lbD1ia0NsYXNzLmV4dGVuZCh7Y29uc3RydWN0OmZ1bmN0aW9uKHQsZSxuKXt0aGlzLmVsbT10LHRoaXMub3B0aW9ucz1lLHRoaXMubmU9bix0aGlzLnBhbmVsQnV0dG9ucz1uZXcgQXJyYXksdGhpcy5idXR0b25MaXN0PWJrRXh0ZW5kKFtdLHRoaXMubmUub3B0aW9ucy5idXR0b25MaXN0KSx0aGlzLnBhbmVsQ29udGFpbj1uZXcgYmtFbGVtZW50KFwiRElWXCIpLnNldFN0eWxlKHtvdmVyZmxvdzpcImhpZGRlblwiLHdpZHRoOlwiMTAwJVwiLGJvcmRlcjpcIjFweCBzb2xpZCAjY2NjY2NjXCIsYmFja2dyb3VuZENvbG9yOlwiI2VmZWZlZlwifSkuYWRkQ2xhc3MoXCJwYW5lbENvbnRhaW5cIiksdGhpcy5wYW5lbEVsbT1uZXcgYmtFbGVtZW50KFwiRElWXCIpLnNldFN0eWxlKHttYXJnaW46XCIycHhcIixtYXJnaW5Ub3A6XCIwcHhcIix6b29tOjEsb3ZlcmZsb3c6XCJoaWRkZW5cIn0pLmFkZENsYXNzKFwicGFuZWxcIikuYXBwZW5kVG8odGhpcy5wYW5lbENvbnRhaW4pLHRoaXMucGFuZWxDb250YWluLmFwcGVuZFRvKHQpO3ZhciBpPXRoaXMubmUub3B0aW9ucyxzPWkuYnV0dG9ucztmb3IoYnV0dG9uIGluIHMpdGhpcy5hZGRCdXR0b24oYnV0dG9uLGksITApO3RoaXMucmVvcmRlcigpLHQubm9TZWxlY3QoKX0sYWRkQnV0dG9uOmZ1bmN0aW9uKGJ1dHRvbk5hbWUsb3B0aW9ucyxub09yZGVyKXt2YXIgYnV0dG9uPW9wdGlvbnMuYnV0dG9uc1tidXR0b25OYW1lXSx0eXBlPWJ1dHRvbi50eXBlP2V2YWwoXCIodHlwZW9mKFwiK2J1dHRvbi50eXBlKycpID09IFwidW5kZWZpbmVkXCIpID8gbnVsbCA6ICcrYnV0dG9uLnR5cGUrXCI7XCIpOm5pY0VkaXRvckJ1dHRvbixoYXNCdXR0b249YmtMaWIuaW5BcnJheSh0aGlzLmJ1dHRvbkxpc3QsYnV0dG9uTmFtZSk7dHlwZSYmKGhhc0J1dHRvbnx8dGhpcy5uZS5vcHRpb25zLmZ1bGxQYW5lbCkmJih0aGlzLnBhbmVsQnV0dG9ucy5wdXNoKG5ldyB0eXBlKHRoaXMucGFuZWxFbG0sYnV0dG9uTmFtZSxvcHRpb25zLHRoaXMubmUpKSxoYXNCdXR0b258fHRoaXMuYnV0dG9uTGlzdC5wdXNoKGJ1dHRvbk5hbWUpKX0sZmluZEJ1dHRvbjpmdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMucGFuZWxCdXR0b25zLmxlbmd0aDtlKyspaWYodGhpcy5wYW5lbEJ1dHRvbnNbZV0ubmFtZT09dClyZXR1cm4gdGhpcy5wYW5lbEJ1dHRvbnNbZV19LHJlb3JkZXI6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5idXR0b25MaXN0LGU9MDtlPHQubGVuZ3RoO2UrKyl7dmFyIG49dGhpcy5maW5kQnV0dG9uKHRbZV0pO24mJnRoaXMucGFuZWxFbG0uYXBwZW5kQ2hpbGQobi5tYXJnaW4pfX0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5lbG0ucmVtb3ZlKCl9fSksbmljRWRpdG9yQnV0dG9uPWJrQ2xhc3MuZXh0ZW5kKHtjb25zdHJ1Y3Q6ZnVuY3Rpb24odCxlLG4saSl7dGhpcy5vcHRpb25zPW4uYnV0dG9uc1tlXSx0aGlzLm5hbWU9ZSx0aGlzLm5lPWksdGhpcy5lbG09dCx0aGlzLm1hcmdpbj1uZXcgYmtFbGVtZW50KFwiRElWXCIpLnNldFN0eWxlKHtmbG9hdDpcImxlZnRcIixtYXJnaW5Ub3A6XCIycHhcIn0pLmFwcGVuZFRvKHQpLHRoaXMuY29udGFpbj1uZXcgYmtFbGVtZW50KFwiRElWXCIpLnNldFN0eWxlKHt3aWR0aDpcIjIwcHhcIixoZWlnaHQ6XCIyMHB4XCJ9KS5hZGRDbGFzcyhcImJ1dHRvbkNvbnRhaW5cIikuYXBwZW5kVG8odGhpcy5tYXJnaW4pLHRoaXMuYm9yZGVyPW5ldyBia0VsZW1lbnQoXCJESVZcIikuc2V0U3R5bGUoe2JhY2tncm91bmRDb2xvcjpcIiNlZmVmZWZcIixib3JkZXI6XCIxcHggc29saWQgI2VmZWZlZlwifSkuYXBwZW5kVG8odGhpcy5jb250YWluKSx0aGlzLmJ1dHRvbj1uZXcgYmtFbGVtZW50KFwiRElWXCIpLnNldFN0eWxlKHt3aWR0aDpcIjE4cHhcIixoZWlnaHQ6XCIxOHB4XCIsb3ZlcmZsb3c6XCJoaWRkZW5cIix6b29tOjEsY3Vyc29yOlwicG9pbnRlclwifSkuYWRkQ2xhc3MoXCJidXR0b25cIikuc2V0U3R5bGUodGhpcy5uZS5nZXRJY29uKGUsbikpLmFwcGVuZFRvKHRoaXMuYm9yZGVyKSx0aGlzLmJ1dHRvbi5hZGRFdmVudChcIm1vdXNlb3ZlclwiLHRoaXMuaG92ZXJPbi5jbG9zdXJlKHRoaXMpKS5hZGRFdmVudChcIm1vdXNlb3V0XCIsdGhpcy5ob3Zlck9mZi5jbG9zdXJlKHRoaXMpKS5hZGRFdmVudChcIm1vdXNlZG93blwiLHRoaXMubW91c2VDbGljay5jbG9zdXJlKHRoaXMpKS5ub1NlbGVjdCgpLHdpbmRvdy5vcGVyYXx8KHRoaXMuYnV0dG9uLm9ubW91c2Vkb3duPXRoaXMuYnV0dG9uLm9uY2xpY2s9YmtMaWIuY2FuY2VsRXZlbnQpLGkuYWRkRXZlbnQoXCJzZWxlY3RlZFwiLHRoaXMuZW5hYmxlLmNsb3N1cmUodGhpcykpLmFkZEV2ZW50KFwiYmx1clwiLHRoaXMuZGlzYWJsZS5jbG9zdXJlKHRoaXMpKS5hZGRFdmVudChcImtleVwiLHRoaXMua2V5LmNsb3N1cmUodGhpcykpLHRoaXMuZGlzYWJsZSgpLHRoaXMuaW5pdCgpfSxpbml0OmZ1bmN0aW9uKCl7fSxoaWRlOmZ1bmN0aW9uKCl7dGhpcy5jb250YWluLnNldFN0eWxlKHtkaXNwbGF5Olwibm9uZVwifSl9LHVwZGF0ZVN0YXRlOmZ1bmN0aW9uKCl7dGhpcy5pc0Rpc2FibGVkP3RoaXMuc2V0QmcoKTp0aGlzLmlzSG92ZXI/dGhpcy5zZXRCZyhcImhvdmVyXCIpOnRoaXMuaXNBY3RpdmU/dGhpcy5zZXRCZyhcImFjdGl2ZVwiKTp0aGlzLnNldEJnKCl9LHNldEJnOmZ1bmN0aW9uKHQpe3N3aXRjaCh0KXtjYXNlXCJob3ZlclwiOnZhciBlPXtib3JkZXI6XCIxcHggc29saWQgIzY2NlwiLGJhY2tncm91bmRDb2xvcjpcIiNkZGRcIn07YnJlYWs7Y2FzZVwiYWN0aXZlXCI6ZT17Ym9yZGVyOlwiMXB4IHNvbGlkICM2NjZcIixiYWNrZ3JvdW5kQ29sb3I6XCIjY2NjXCJ9O2JyZWFrO2RlZmF1bHQ6ZT17Ym9yZGVyOlwiMXB4IHNvbGlkICNlZmVmZWZcIixiYWNrZ3JvdW5kQ29sb3I6XCIjZWZlZmVmXCJ9fXRoaXMuYm9yZGVyLnNldFN0eWxlKGUpLmFkZENsYXNzKFwiYnV0dG9uLVwiK3QpfSxjaGVja05vZGVzOmZ1bmN0aW9uKHQpe3ZhciBlPXQ7ZG97aWYodGhpcy5vcHRpb25zLnRhZ3MmJmJrTGliLmluQXJyYXkodGhpcy5vcHRpb25zLnRhZ3MsZS5ub2RlTmFtZSkpcmV0dXJuIHRoaXMuYWN0aXZhdGUoKSwhMH13aGlsZShlPWUucGFyZW50Tm9kZSYmXCJuaWNFZGl0XCIhPWUuY2xhc3NOYW1lKTtmb3IoZT0kQksodCk7Mz09ZS5ub2RlVHlwZTspZT0kQksoZS5wYXJlbnROb2RlKTtpZih0aGlzLm9wdGlvbnMuY3NzKWZvcihpdG0gaW4gdGhpcy5vcHRpb25zLmNzcylpZihlLmdldFN0eWxlKGl0bSx0aGlzLm5lLnNlbGVjdGVkSW5zdGFuY2UuaW5zdGFuY2VEb2MpPT10aGlzLm9wdGlvbnMuY3NzW2l0bV0pcmV0dXJuIHRoaXMuYWN0aXZhdGUoKSwhMDtyZXR1cm4gdGhpcy5kZWFjdGl2YXRlKCksITF9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7dGhpcy5pc0Rpc2FibGVkfHwodGhpcy5pc0FjdGl2ZT0hMCx0aGlzLnVwZGF0ZVN0YXRlKCksdGhpcy5uZS5maXJlRXZlbnQoXCJidXR0b25BY3RpdmF0ZVwiLHRoaXMpKX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3RoaXMuaXNBY3RpdmU9ITEsdGhpcy51cGRhdGVTdGF0ZSgpLHRoaXMuaXNEaXNhYmxlZHx8dGhpcy5uZS5maXJlRXZlbnQoXCJidXR0b25EZWFjdGl2YXRlXCIsdGhpcyl9LGVuYWJsZTpmdW5jdGlvbih0LGUpe3RoaXMuaXNEaXNhYmxlZD0hMSx0aGlzLmNvbnRhaW4uc2V0U3R5bGUoe29wYWNpdHk6MX0pLmFkZENsYXNzKFwiYnV0dG9uRW5hYmxlZFwiKSx0aGlzLnVwZGF0ZVN0YXRlKCksdGhpcy5jaGVja05vZGVzKGUpfSxkaXNhYmxlOmZ1bmN0aW9uKHQsZSl7dGhpcy5pc0Rpc2FibGVkPSEwLHRoaXMuY29udGFpbi5zZXRTdHlsZSh7b3BhY2l0eTouNn0pLnJlbW92ZUNsYXNzKFwiYnV0dG9uRW5hYmxlZFwiKSx0aGlzLnVwZGF0ZVN0YXRlKCl9LHRvZ2dsZUFjdGl2ZTpmdW5jdGlvbigpe3RoaXMuaXNBY3RpdmU/dGhpcy5kZWFjdGl2YXRlKCk6dGhpcy5hY3RpdmF0ZSgpfSxob3Zlck9uOmZ1bmN0aW9uKCl7dGhpcy5pc0Rpc2FibGVkfHwodGhpcy5pc0hvdmVyPSEwLHRoaXMudXBkYXRlU3RhdGUoKSx0aGlzLm5lLmZpcmVFdmVudChcImJ1dHRvbk92ZXJcIix0aGlzKSl9LGhvdmVyT2ZmOmZ1bmN0aW9uKCl7dGhpcy5pc0hvdmVyPSExLHRoaXMudXBkYXRlU3RhdGUoKSx0aGlzLm5lLmZpcmVFdmVudChcImJ1dHRvbk91dFwiLHRoaXMpfSxtb3VzZUNsaWNrOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLmNvbW1hbmQmJih0aGlzLm5lLm5pY0NvbW1hbmQodGhpcy5vcHRpb25zLmNvbW1hbmQsdGhpcy5vcHRpb25zLmNvbW1hbmRBcmdzKSx0aGlzLm9wdGlvbnMubm9BY3RpdmV8fHRoaXMudG9nZ2xlQWN0aXZlKCkpLHRoaXMubmUuZmlyZUV2ZW50KFwiYnV0dG9uQ2xpY2tcIix0aGlzKX0sa2V5OmZ1bmN0aW9uKHQsZSl7dGhpcy5vcHRpb25zLmtleSYmZS5jdHJsS2V5JiZTdHJpbmcuZnJvbUNoYXJDb2RlKGUua2V5Q29kZXx8ZS5jaGFyQ29kZSkudG9Mb3dlckNhc2UoKT09dGhpcy5vcHRpb25zLmtleSYmKHRoaXMubW91c2VDbGljaygpLGUucHJldmVudERlZmF1bHQmJmUucHJldmVudERlZmF1bHQoKSl9fSksbmljUGx1Z2luPWJrQ2xhc3MuZXh0ZW5kKHtjb25zdHJ1Y3Q6ZnVuY3Rpb24odCxlKXt0aGlzLm9wdGlvbnM9ZSx0aGlzLm5lPXQsdGhpcy5uZS5hZGRFdmVudChcInBhbmVsXCIsdGhpcy5sb2FkUGFuZWwuY2xvc3VyZSh0aGlzKSksdGhpcy5pbml0KCl9LGxvYWRQYW5lbDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLm9wdGlvbnMuYnV0dG9ucztmb3IodmFyIG4gaW4gZSl0LmFkZEJ1dHRvbihuLHRoaXMub3B0aW9ucyk7dC5yZW9yZGVyKCl9LGluaXQ6ZnVuY3Rpb24oKXt9fSksbmljUGFuZU9wdGlvbnM9e30sbmljRWRpdG9yUGFuZT1ia0NsYXNzLmV4dGVuZCh7Y29uc3RydWN0OmZ1bmN0aW9uKHQsZSxuLGkpe3RoaXMubmU9ZSx0aGlzLmVsbT10LHRoaXMucG9zPXQucG9zKCksdGhpcy5jb250YWluPW5ldyBia0VsZW1lbnQoXCJkaXZcIikuc2V0U3R5bGUoe3pJbmRleDpcIjk5OTk5XCIsb3ZlcmZsb3c6XCJoaWRkZW5cIixwb3NpdGlvbjpcImFic29sdXRlXCIsbGVmdDp0aGlzLnBvc1swXStcInB4XCIsdG9wOnRoaXMucG9zWzFdK1wicHhcIn0pLHRoaXMucGFuZT1uZXcgYmtFbGVtZW50KFwiZGl2XCIpLnNldFN0eWxlKHtmb250U2l6ZTpcIjEycHhcIixib3JkZXI6XCIxcHggc29saWQgI2NjY1wiLG92ZXJmbG93OlwiaGlkZGVuXCIscGFkZGluZzpcIjRweFwiLHRleHRBbGlnbjpcImxlZnRcIixiYWNrZ3JvdW5kQ29sb3I6XCIjZmZmZmM5XCJ9KS5hZGRDbGFzcyhcInBhbmVcIikuc2V0U3R5bGUobikuYXBwZW5kVG8odGhpcy5jb250YWluKSxpJiYhaS5vcHRpb25zLm5vQ2xvc2UmJih0aGlzLmNsb3NlPW5ldyBia0VsZW1lbnQoXCJkaXZcIikuc2V0U3R5bGUoe2Zsb2F0OlwicmlnaHRcIixoZWlnaHQ6XCIxNnB4XCIsd2lkdGg6XCIxNnB4XCIsY3Vyc29yOlwicG9pbnRlclwifSkuc2V0U3R5bGUodGhpcy5uZS5nZXRJY29uKFwiY2xvc2VcIixuaWNQYW5lT3B0aW9ucykpLmFkZEV2ZW50KFwibW91c2Vkb3duXCIsaS5yZW1vdmVQYW5lLmNsb3N1cmUodGhpcykpLmFwcGVuZFRvKHRoaXMucGFuZSkpLHRoaXMuY29udGFpbi5ub1NlbGVjdCgpLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpLHRoaXMucG9zaXRpb24oKSx0aGlzLmluaXQoKX0saW5pdDpmdW5jdGlvbigpe30scG9zaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzLm5lLm5pY1BhbmVsKXt2YXIgdD10aGlzLm5lLm5pY1BhbmVsLmVsbSxlPXQucG9zKClbMF0rcGFyc2VJbnQodC5nZXRTdHlsZShcIndpZHRoXCIpKS0ocGFyc2VJbnQodGhpcy5wYW5lLmdldFN0eWxlKFwid2lkdGhcIikpKzgpO2U8dGhpcy5wb3NbMF0mJnRoaXMuY29udGFpbi5zZXRTdHlsZSh7bGVmdDplK1wicHhcIn0pfX0sdG9nZ2xlOmZ1bmN0aW9uKCl7dGhpcy5pc1Zpc2libGU9IXRoaXMuaXNWaXNpYmxlLHRoaXMuY29udGFpbi5zZXRTdHlsZSh7ZGlzcGxheTp0aGlzLmlzVmlzaWJsZT9cImJsb2NrXCI6XCJub25lXCJ9KX0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5jb250YWluJiYodGhpcy5jb250YWluLnJlbW92ZSgpLHRoaXMuY29udGFpbj1udWxsKX0sYXBwZW5kOmZ1bmN0aW9uKHQpe3QuYXBwZW5kVG8odGhpcy5wYW5lKX0sc2V0Q29udGVudDpmdW5jdGlvbih0KXt0aGlzLnBhbmUuc2V0Q29udGVudCh0KX19KSxuaWNTZWxlY3RPcHRpb25zPXtidXR0b25zOntmb250U2l6ZTp7bmFtZTpfXyhcIlNlbGVjdCBGb250IFNpemVcIiksdHlwZTpcIm5pY0VkaXRvckZvbnRTaXplU2VsZWN0XCIsY29tbWFuZDpcImZvbnRzaXplXCJ9LGZvbnRGYW1pbHk6e25hbWU6X18oXCJTZWxlY3QgRm9udCBGYW1pbHlcIiksdHlwZTpcIm5pY0VkaXRvckZvbnRGYW1pbHlTZWxlY3RcIixjb21tYW5kOlwiZm9udG5hbWVcIn0sZm9udEZvcm1hdDp7bmFtZTpfXyhcIlNlbGVjdCBGb250IEZvcm1hdFwiKSx0eXBlOlwibmljRWRpdG9yRm9udEZvcm1hdFNlbGVjdFwiLGNvbW1hbmQ6XCJmb3JtYXRCbG9ja1wifX19LG5pY0VkaXRvclNlbGVjdD1ia0NsYXNzLmV4dGVuZCh7Y29uc3RydWN0OmZ1bmN0aW9uKHQsZSxuLGkpe3RoaXMub3B0aW9ucz1uLmJ1dHRvbnNbZV0sdGhpcy5lbG09dCx0aGlzLm5lPWksdGhpcy5uYW1lPWUsdGhpcy5zZWxPcHRpb25zPW5ldyBBcnJheSx0aGlzLm1hcmdpbj1uZXcgYmtFbGVtZW50KFwiZGl2XCIpLnNldFN0eWxlKHtmbG9hdDpcImxlZnRcIixtYXJnaW46XCIycHggMXB4IDAgMXB4XCJ9KS5hcHBlbmRUbyh0aGlzLmVsbSksdGhpcy5jb250YWluPW5ldyBia0VsZW1lbnQoXCJkaXZcIikuc2V0U3R5bGUoe3dpZHRoOlwiOTBweFwiLGhlaWdodDpcIjIwcHhcIixjdXJzb3I6XCJwb2ludGVyXCIsb3ZlcmZsb3c6XCJoaWRkZW5cIn0pLmFkZENsYXNzKFwic2VsZWN0Q29udGFpblwiKS5hZGRFdmVudChcImNsaWNrXCIsdGhpcy50b2dnbGUuY2xvc3VyZSh0aGlzKSkuYXBwZW5kVG8odGhpcy5tYXJnaW4pLHRoaXMuaXRlbXM9bmV3IGJrRWxlbWVudChcImRpdlwiKS5zZXRTdHlsZSh7b3ZlcmZsb3c6XCJoaWRkZW5cIix6b29tOjEsYm9yZGVyOlwiMXB4IHNvbGlkICNjY2NcIixwYWRkaW5nTGVmdDpcIjNweFwiLGJhY2tncm91bmRDb2xvcjpcIiNmZmZcIn0pLmFwcGVuZFRvKHRoaXMuY29udGFpbiksdGhpcy5jb250cm9sPW5ldyBia0VsZW1lbnQoXCJkaXZcIikuc2V0U3R5bGUoe292ZXJmbG93OlwiaGlkZGVuXCIsZmxvYXQ6XCJyaWdodFwiLGhlaWdodDpcIjE4cHhcIix3aWR0aDpcIjE2cHhcIn0pLmFkZENsYXNzKFwic2VsZWN0Q29udHJvbFwiKS5zZXRTdHlsZSh0aGlzLm5lLmdldEljb24oXCJhcnJvd1wiLG4pKS5hcHBlbmRUbyh0aGlzLml0ZW1zKSx0aGlzLnR4dD1uZXcgYmtFbGVtZW50KFwiZGl2XCIpLnNldFN0eWxlKHtvdmVyZmxvdzpcImhpZGRlblwiLGZsb2F0OlwibGVmdFwiLHdpZHRoOlwiNjZweFwiLGhlaWdodDpcIjE0cHhcIixtYXJnaW5Ub3A6XCIxcHhcIixmb250RmFtaWx5Olwic2Fucy1zZXJpZlwiLHRleHRBbGlnbjpcImNlbnRlclwiLGZvbnRTaXplOlwiMTJweFwifSkuYWRkQ2xhc3MoXCJzZWxlY3RUeHRcIikuYXBwZW5kVG8odGhpcy5pdGVtcyksd2luZG93Lm9wZXJhfHwodGhpcy5jb250YWluLm9ubW91c2Vkb3duPXRoaXMuY29udHJvbC5vbm1vdXNlZG93bj10aGlzLnR4dC5vbm1vdXNlZG93bj1ia0xpYi5jYW5jZWxFdmVudCksdGhpcy5tYXJnaW4ubm9TZWxlY3QoKSx0aGlzLm5lLmFkZEV2ZW50KFwic2VsZWN0ZWRcIix0aGlzLmVuYWJsZS5jbG9zdXJlKHRoaXMpKS5hZGRFdmVudChcImJsdXJcIix0aGlzLmRpc2FibGUuY2xvc3VyZSh0aGlzKSksdGhpcy5kaXNhYmxlKCksdGhpcy5pbml0KCl9LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLmlzRGlzYWJsZWQ9ITAsdGhpcy5jbG9zZSgpLHRoaXMuY29udGFpbi5zZXRTdHlsZSh7b3BhY2l0eTouNn0pfSxlbmFibGU6ZnVuY3Rpb24odCl7dGhpcy5pc0Rpc2FibGVkPSExLHRoaXMuY2xvc2UoKSx0aGlzLmNvbnRhaW4uc2V0U3R5bGUoe29wYWNpdHk6MX0pfSxzZXREaXNwbGF5OmZ1bmN0aW9uKHQpe3RoaXMudHh0LnNldENvbnRlbnQodCl9LHRvZ2dsZTpmdW5jdGlvbigpe3RoaXMuaXNEaXNhYmxlZHx8KHRoaXMucGFuZT90aGlzLmNsb3NlKCk6dGhpcy5vcGVuKCkpfSxvcGVuOmZ1bmN0aW9uKCl7dGhpcy5wYW5lPW5ldyBuaWNFZGl0b3JQYW5lKHRoaXMuaXRlbXMsdGhpcy5uZSx7d2lkdGg6XCI4OHB4XCIscGFkZGluZzpcIjBweFwiLGJvcmRlclRvcDowLGJvcmRlckxlZnQ6XCIxcHggc29saWQgI2NjY1wiLGJvcmRlclJpZ2h0OlwiMXB4IHNvbGlkICNjY2NcIixib3JkZXJCb3R0b206XCIwcHhcIixiYWNrZ3JvdW5kQ29sb3I6XCIjZmZmXCJ9KTtmb3IodmFyIHQ9MDt0PHRoaXMuc2VsT3B0aW9ucy5sZW5ndGg7dCsrKXt2YXIgZT10aGlzLnNlbE9wdGlvbnNbdF0sbj1uZXcgYmtFbGVtZW50KFwiZGl2XCIpLnNldFN0eWxlKHtvdmVyZmxvdzpcImhpZGRlblwiLGJvcmRlckJvdHRvbTpcIjFweCBzb2xpZCAjY2NjXCIsd2lkdGg6XCI4OHB4XCIsdGV4dEFsaWduOlwibGVmdFwiLG92ZXJmbG93OlwiaGlkZGVuXCIsY3Vyc29yOlwicG9pbnRlclwifSksaT1uZXcgYmtFbGVtZW50KFwiZGl2XCIpLnNldFN0eWxlKHtwYWRkaW5nOlwiMHB4IDRweFwifSkuc2V0Q29udGVudChlWzFdKS5hcHBlbmRUbyhuKS5ub1NlbGVjdCgpO2kuYWRkRXZlbnQoXCJjbGlja1wiLHRoaXMudXBkYXRlLmNsb3N1cmUodGhpcyxlWzBdKSkuYWRkRXZlbnQoXCJtb3VzZW92ZXJcIix0aGlzLm92ZXIuY2xvc3VyZSh0aGlzLGkpKS5hZGRFdmVudChcIm1vdXNlb3V0XCIsdGhpcy5vdXQuY2xvc3VyZSh0aGlzLGkpKS5zZXRBdHRyaWJ1dGVzKFwiaWRcIixlWzBdKSx0aGlzLnBhbmUuYXBwZW5kKG4pLHdpbmRvdy5vcGVyYXx8KGkub25tb3VzZWRvd249YmtMaWIuY2FuY2VsRXZlbnQpfX0sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLnBhbmUmJih0aGlzLnBhbmU9dGhpcy5wYW5lLnJlbW92ZSgpKX0sb3ZlcjpmdW5jdGlvbih0KXt0LnNldFN0eWxlKHtiYWNrZ3JvdW5kQ29sb3I6XCIjY2NjXCJ9KX0sb3V0OmZ1bmN0aW9uKHQpe3Quc2V0U3R5bGUoe2JhY2tncm91bmRDb2xvcjpcIiNmZmZcIn0pfSxhZGQ6ZnVuY3Rpb24odCxlKXt0aGlzLnNlbE9wdGlvbnMucHVzaChuZXcgQXJyYXkodCxlKSl9LHVwZGF0ZTpmdW5jdGlvbih0KXt0aGlzLm5lLm5pY0NvbW1hbmQodGhpcy5vcHRpb25zLmNvbW1hbmQsdCksdGhpcy5jbG9zZSgpfX0pLG5pY0VkaXRvckZvbnRTaXplU2VsZWN0PW5pY0VkaXRvclNlbGVjdC5leHRlbmQoe3NlbDp7MTpcIjEmbmJzcDsoOHB0KVwiLDI6XCIyJm5ic3A7KDEwcHQpXCIsMzpcIjMmbmJzcDsoMTJwdClcIiw0OlwiNCZuYnNwOygxNHB0KVwiLDU6XCI1Jm5ic3A7KDE4cHQpXCIsNjpcIjYmbmJzcDsoMjRwdClcIn0saW5pdDpmdW5jdGlvbigpe2ZvcihpdG0gaW4gdGhpcy5zZXREaXNwbGF5KFwiRm9udCZuYnNwO1NpemUuLi5cIiksdGhpcy5zZWwpdGhpcy5hZGQoaXRtLCc8Zm9udCBzaXplPVwiJytpdG0rJ1wiPicrdGhpcy5zZWxbaXRtXStcIjwvZm9udD5cIil9fSksbmljRWRpdG9yRm9udEZhbWlseVNlbGVjdD1uaWNFZGl0b3JTZWxlY3QuZXh0ZW5kKHtzZWw6e2FyaWFsOlwiQXJpYWxcIixcImNvbWljIHNhbnMgbXNcIjpcIkNvbWljIFNhbnNcIixcImNvdXJpZXIgbmV3XCI6XCJDb3VyaWVyIE5ld1wiLGdlb3JnaWE6XCJHZW9yZ2lhXCIsaGVsdmV0aWNhOlwiSGVsdmV0aWNhXCIsaW1wYWN0OlwiSW1wYWN0XCIsXCJ0aW1lcyBuZXcgcm9tYW5cIjpcIlRpbWVzXCIsXCJ0cmVidWNoZXQgbXNcIjpcIlRyZWJ1Y2hldFwiLHZlcmRhbmE6XCJWZXJkYW5hXCJ9LGluaXQ6ZnVuY3Rpb24oKXtmb3IoaXRtIGluIHRoaXMuc2V0RGlzcGxheShcIkZvbnQmbmJzcDtGYW1pbHkuLi5cIiksdGhpcy5zZWwpdGhpcy5hZGQoaXRtLCc8Zm9udCBmYWNlPVwiJytpdG0rJ1wiPicrdGhpcy5zZWxbaXRtXStcIjwvZm9udD5cIil9fSksbmljRWRpdG9yRm9udEZvcm1hdFNlbGVjdD1uaWNFZGl0b3JTZWxlY3QuZXh0ZW5kKHtzZWw6e3A6XCJQYXJhZ3JhcGhcIixwcmU6XCJQcmVcIixoNjpcIkhlYWRpbmcmbmJzcDs2XCIsaDU6XCJIZWFkaW5nJm5ic3A7NVwiLGg0OlwiSGVhZGluZyZuYnNwOzRcIixoMzpcIkhlYWRpbmcmbmJzcDszXCIsaDI6XCJIZWFkaW5nJm5ic3A7MlwiLGgxOlwiSGVhZGluZyZuYnNwOzFcIn0saW5pdDpmdW5jdGlvbigpe2ZvcihpdG0gaW4gdGhpcy5zZXREaXNwbGF5KFwiRm9udCZuYnNwO0Zvcm1hdC4uLlwiKSx0aGlzLnNlbCl7dmFyIHQ9aXRtLnRvVXBwZXJDYXNlKCk7dGhpcy5hZGQoXCI8XCIrdCtcIj5cIixcIjxcIitpdG0rJyBzdHlsZT1cInBhZGRpbmc6IDBweDsgbWFyZ2luOiAwcHg7XCI+Jyt0aGlzLnNlbFtpdG1dK1wiPC9cIit0K1wiPlwiKX19fSk7bmljRWRpdG9ycy5yZWdpc3RlclBsdWdpbihuaWNQbHVnaW4sbmljU2VsZWN0T3B0aW9ucyk7dmFyIG5pY0J1dHRvblRpcHM9YmtDbGFzcy5leHRlbmQoe2NvbnN0cnVjdDpmdW5jdGlvbih0KXt0aGlzLm5lPXQsdC5hZGRFdmVudChcImJ1dHRvbk92ZXJcIix0aGlzLnNob3cuY2xvc3VyZSh0aGlzKSkuYWRkRXZlbnQoXCJidXR0b25PdXRcIix0aGlzLmhpZGUuY2xvc3VyZSh0aGlzKSl9LHNob3c6ZnVuY3Rpb24odCl7dGhpcy50aW1lcj1zZXRUaW1lb3V0KHRoaXMuY3JlYXRlLmNsb3N1cmUodGhpcyx0KSw0MDApfSxjcmVhdGU6ZnVuY3Rpb24odCl7dGhpcy50aW1lcj1udWxsLHRoaXMucGFuZXx8KHRoaXMucGFuZT1uZXcgbmljRWRpdG9yUGFuZSh0LmJ1dHRvbix0aGlzLm5lLHtmb250U2l6ZTpcIjEycHhcIixtYXJnaW5Ub3A6XCI1cHhcIn0pLHRoaXMucGFuZS5zZXRDb250ZW50KHQub3B0aW9ucy5uYW1lKSl9LGhpZGU6ZnVuY3Rpb24odCl7dGhpcy50aW1lciYmY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpLHRoaXMucGFuZSYmKHRoaXMucGFuZT10aGlzLnBhbmUucmVtb3ZlKCkpfX0pO25pY0VkaXRvcnMucmVnaXN0ZXJQbHVnaW4obmljQnV0dG9uVGlwcyk7dmFyIG5pY0VkaXRvckFkdmFuY2VkQnV0dG9uPW5pY0VkaXRvckJ1dHRvbi5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oKXt0aGlzLm5lLmFkZEV2ZW50KFwic2VsZWN0ZWRcIix0aGlzLnJlbW92ZVBhbmUuY2xvc3VyZSh0aGlzKSkuYWRkRXZlbnQoXCJibHVyXCIsdGhpcy5yZW1vdmVQYW5lLmNsb3N1cmUodGhpcykpfSxtb3VzZUNsaWNrOmZ1bmN0aW9uKCl7dGhpcy5pc0Rpc2FibGVkfHwodGhpcy5wYW5lJiZ0aGlzLnBhbmUucGFuZT90aGlzLnJlbW92ZVBhbmUoKToodGhpcy5wYW5lPW5ldyBuaWNFZGl0b3JQYW5lKHRoaXMuY29udGFpbix0aGlzLm5lLHt3aWR0aDp0aGlzLndpZHRofHxcIjI3MHB4XCIsYmFja2dyb3VuZENvbG9yOlwiI2ZmZlwifSx0aGlzKSx0aGlzLmFkZFBhbmUoKSx0aGlzLm5lLnNlbGVjdGVkSW5zdGFuY2Uuc2F2ZVJuZygpKSl9LGFkZEZvcm06ZnVuY3Rpb24odCxlKXtmb3IoaXRtIGluIHRoaXMuZm9ybT1uZXcgYmtFbGVtZW50KFwiZm9ybVwiKS5hZGRFdmVudChcInN1Ym1pdFwiLHRoaXMuc3VibWl0LmNsb3N1cmVMaXN0ZW5lcih0aGlzKSksdGhpcy5wYW5lLmFwcGVuZCh0aGlzLmZvcm0pLHRoaXMuaW5wdXRzPXt9LHQpe3ZhciBuPXRbaXRtXSxpPVwiXCI7ZSYmKGk9ZS5nZXRBdHRyaWJ1dGUoaXRtKSksaXx8KGk9bi52YWx1ZXx8XCJcIik7dmFyIHM9dFtpdG1dLnR5cGU7aWYoXCJ0aXRsZVwiPT1zKW5ldyBia0VsZW1lbnQoXCJkaXZcIikuc2V0Q29udGVudChuLnR4dCkuc2V0U3R5bGUoe2ZvbnRTaXplOlwiMTRweFwiLGZvbnRXZWlnaHQ6XCJib2xkXCIscGFkZGluZzpcIjBweFwiLG1hcmdpbjpcIjJweCAwXCJ9KS5hcHBlbmRUbyh0aGlzLmZvcm0pO2Vsc2V7dmFyIG89bmV3IGJrRWxlbWVudChcImRpdlwiKS5zZXRTdHlsZSh7b3ZlcmZsb3c6XCJoaWRkZW5cIixjbGVhcjpcImJvdGhcIn0pLmFwcGVuZFRvKHRoaXMuZm9ybSk7c3dpdGNoKG4udHh0JiZuZXcgYmtFbGVtZW50KFwibGFiZWxcIikuc2V0QXR0cmlidXRlcyh7Zm9yOml0bX0pLnNldENvbnRlbnQobi50eHQpLnNldFN0eWxlKHttYXJnaW46XCIycHggNHB4XCIsZm9udFNpemU6XCIxM3B4XCIsd2lkdGg6XCI1MHB4XCIsbGluZUhlaWdodDpcIjIwcHhcIix0ZXh0QWxpZ246XCJyaWdodFwiLGZsb2F0OlwibGVmdFwifSkuYXBwZW5kVG8obykscyl7Y2FzZVwidGV4dFwiOnRoaXMuaW5wdXRzW2l0bV09bmV3IGJrRWxlbWVudChcImlucHV0XCIpLnNldEF0dHJpYnV0ZXMoe2lkOml0bSx2YWx1ZTppLHR5cGU6XCJ0ZXh0XCJ9KS5zZXRTdHlsZSh7bWFyZ2luOlwiMnB4IDBcIixmb250U2l6ZTpcIjEzcHhcIixmbG9hdDpcImxlZnRcIixoZWlnaHQ6XCIyMHB4XCIsYm9yZGVyOlwiMXB4IHNvbGlkICNjY2NcIixvdmVyZmxvdzpcImhpZGRlblwifSkuc2V0U3R5bGUobi5zdHlsZSkuYXBwZW5kVG8obyk7YnJlYWs7Y2FzZVwic2VsZWN0XCI6Zm9yKG9wdCBpbiB0aGlzLmlucHV0c1tpdG1dPW5ldyBia0VsZW1lbnQoXCJzZWxlY3RcIikuc2V0QXR0cmlidXRlcyh7aWQ6aXRtfSkuc2V0U3R5bGUoe2JvcmRlcjpcIjFweCBzb2xpZCAjY2NjXCIsZmxvYXQ6XCJsZWZ0XCIsbWFyZ2luOlwiMnB4IDBcIn0pLmFwcGVuZFRvKG8pLG4ub3B0aW9ucyluZXcgYmtFbGVtZW50KFwib3B0aW9uXCIpLnNldEF0dHJpYnV0ZXMoe3ZhbHVlOm9wdCxzZWxlY3RlZDpvcHQ9PWk/XCJzZWxlY3RlZFwiOlwiXCJ9KS5zZXRDb250ZW50KG4ub3B0aW9uc1tvcHRdKS5hcHBlbmRUbyh0aGlzLmlucHV0c1tpdG1dKTticmVhaztjYXNlXCJjb250ZW50XCI6dGhpcy5pbnB1dHNbaXRtXT1uZXcgYmtFbGVtZW50KFwidGV4dGFyZWFcIikuc2V0QXR0cmlidXRlcyh7aWQ6aXRtfSkuc2V0U3R5bGUoe2JvcmRlcjpcIjFweCBzb2xpZCAjY2NjXCIsZmxvYXQ6XCJsZWZ0XCJ9KS5zZXRTdHlsZShuLnN0eWxlKS5hcHBlbmRUbyhvKSx0aGlzLmlucHV0c1tpdG1dLnZhbHVlPWl9fX1uZXcgYmtFbGVtZW50KFwiaW5wdXRcIikuc2V0QXR0cmlidXRlcyh7dHlwZTpcInN1Ym1pdFwifSkuc2V0U3R5bGUoe2JhY2tncm91bmRDb2xvcjpcIiNlZmVmZWZcIixib3JkZXI6XCIxcHggc29saWQgI2NjY1wiLG1hcmdpbjpcIjNweCAwXCIsZmxvYXQ6XCJsZWZ0XCIsY2xlYXI6XCJib3RoXCJ9KS5hcHBlbmRUbyh0aGlzLmZvcm0pLHRoaXMuZm9ybS5vbnN1Ym1pdD1ia0xpYi5jYW5jZWxFdmVudH0sc3VibWl0OmZ1bmN0aW9uKCl7fSxmaW5kRWxtOmZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIGk9dGhpcy5uZS5zZWxlY3RlZEluc3RhbmNlLmdldEVsbSgpLmdldEVsZW1lbnRzQnlUYWdOYW1lKHQpLHM9MDtzPGkubGVuZ3RoO3MrKylpZihpW3NdLmdldEF0dHJpYnV0ZShlKT09bilyZXR1cm4gJEJLKGlbc10pfSxyZW1vdmVQYW5lOmZ1bmN0aW9uKCl7dGhpcy5wYW5lJiYodGhpcy5wYW5lLnJlbW92ZSgpLHRoaXMucGFuZT1udWxsLHRoaXMubmUuc2VsZWN0ZWRJbnN0YW5jZS5yZXN0b3JlUm5nKCkpfX0pLG5pY0xpbmtPcHRpb25zPXtidXR0b25zOntsaW5rOntuYW1lOlwiQWRkIExpbmtcIix0eXBlOlwibmljTGlua0J1dHRvblwiLHRhZ3M6W1wiQVwiXX0sdW5saW5rOntuYW1lOlwiUmVtb3ZlIExpbmtcIixjb21tYW5kOlwidW5saW5rXCIsbm9BY3RpdmU6ITB9fX0sbmljTGlua0J1dHRvbj1uaWNFZGl0b3JBZHZhbmNlZEJ1dHRvbi5leHRlbmQoe2FkZFBhbmU6ZnVuY3Rpb24oKXt0aGlzLmxuPXRoaXMubmUuc2VsZWN0ZWRJbnN0YW5jZS5zZWxFbG0oKS5wYXJlbnRUYWcoXCJBXCIpLHRoaXMuYWRkRm9ybSh7XCJcIjp7dHlwZTpcInRpdGxlXCIsdHh0OlwiQWRkL0VkaXQgTGlua1wifSxocmVmOnt0eXBlOlwidGV4dFwiLHR4dDpcIlVSTFwiLHZhbHVlOlwiaHR0cDovL1wiLHN0eWxlOnt3aWR0aDpcIjE1MHB4XCJ9fSx0aXRsZTp7dHlwZTpcInRleHRcIix0eHQ6XCJUaXRsZVwifSx0YXJnZXQ6e3R5cGU6XCJzZWxlY3RcIix0eHQ6XCJPcGVuIEluXCIsb3B0aW9uczp7XCJcIjpcIkN1cnJlbnQgV2luZG93XCIsX2JsYW5rOlwiTmV3IFdpbmRvd1wifSxzdHlsZTp7d2lkdGg6XCIxMDBweFwifX19LHRoaXMubG4pfSxzdWJtaXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5pbnB1dHMuaHJlZi52YWx1ZTtpZihcImh0dHA6Ly9cIj09ZXx8XCJcIj09ZSlyZXR1cm4gYWxlcnQoXCJZb3UgbXVzdCBlbnRlciBhIFVSTCB0byBDcmVhdGUgYSBMaW5rXCIpLCExO2lmKHRoaXMucmVtb3ZlUGFuZSgpLCF0aGlzLmxuKXt2YXIgbj1cImphdmFzY3JpcHQ6bmljVGVtcCgpO1wiO3RoaXMubmUubmljQ29tbWFuZChcImNyZWF0ZWxpbmtcIixuKSx0aGlzLmxuPXRoaXMuZmluZEVsbShcIkFcIixcImhyZWZcIixuKX10aGlzLmxuJiZ0aGlzLmxuLnNldEF0dHJpYnV0ZXMoe2hyZWY6dGhpcy5pbnB1dHMuaHJlZi52YWx1ZSx0aXRsZTp0aGlzLmlucHV0cy50aXRsZS52YWx1ZSx0YXJnZXQ6dGhpcy5pbnB1dHMudGFyZ2V0Lm9wdGlvbnNbdGhpcy5pbnB1dHMudGFyZ2V0LnNlbGVjdGVkSW5kZXhdLnZhbHVlfSl9fSk7bmljRWRpdG9ycy5yZWdpc3RlclBsdWdpbihuaWNQbHVnaW4sbmljTGlua09wdGlvbnMpO3ZhciBuaWNDb2xvck9wdGlvbnM9e2J1dHRvbnM6e2ZvcmVjb2xvcjp7bmFtZTpfXyhcIkNoYW5nZSBUZXh0IENvbG9yXCIpLHR5cGU6XCJuaWNFZGl0b3JDb2xvckJ1dHRvblwiLG5vQ2xvc2U6ITB9LGJnY29sb3I6e25hbWU6X18oXCJDaGFuZ2UgQmFja2dyb3VuZCBDb2xvclwiKSx0eXBlOlwibmljRWRpdG9yQmdDb2xvckJ1dHRvblwiLG5vQ2xvc2U6ITB9fX0sbmljRWRpdG9yQ29sb3JCdXR0b249bmljRWRpdG9yQWR2YW5jZWRCdXR0b24uZXh0ZW5kKHthZGRQYW5lOmZ1bmN0aW9uKCl7dmFyIHQ9ezA6XCIwMFwiLDE6XCIzM1wiLDI6XCI2NlwiLDM6XCI5OVwiLDQ6XCJDQ1wiLDU6XCJGRlwifSxlPW5ldyBia0VsZW1lbnQoXCJESVZcIikuc2V0U3R5bGUoe3dpZHRoOlwiMjcwcHhcIn0pO2Zvcih2YXIgbiBpbiB0KWZvcih2YXIgaSBpbiB0KWZvcih2YXIgcyBpbiB0KXt2YXIgbz1cIiNcIit0W25dK3Rbc10rdFtpXSxhPW5ldyBia0VsZW1lbnQoXCJESVZcIikuc2V0U3R5bGUoe2N1cnNvcjpcInBvaW50ZXJcIixoZWlnaHQ6XCIxNXB4XCIsZmxvYXQ6XCJsZWZ0XCJ9KS5hcHBlbmRUbyhlKSxyPW5ldyBia0VsZW1lbnQoXCJESVZcIikuc2V0U3R5bGUoe2JvcmRlcjpcIjJweCBzb2xpZCBcIitvfSkuYXBwZW5kVG8oYSksbD1uZXcgYmtFbGVtZW50KFwiRElWXCIpLnNldFN0eWxlKHtiYWNrZ3JvdW5kQ29sb3I6byxvdmVyZmxvdzpcImhpZGRlblwiLHdpZHRoOlwiMTFweFwiLGhlaWdodDpcIjExcHhcIn0pLmFkZEV2ZW50KFwiY2xpY2tcIix0aGlzLmNvbG9yU2VsZWN0LmNsb3N1cmUodGhpcyxvKSkuYWRkRXZlbnQoXCJtb3VzZW92ZXJcIix0aGlzLm9uLmNsb3N1cmUodGhpcyxyKSkuYWRkRXZlbnQoXCJtb3VzZW91dFwiLHRoaXMub2ZmLmNsb3N1cmUodGhpcyxyLG8pKS5hcHBlbmRUbyhyKTt3aW5kb3cub3BlcmF8fChhLm9ubW91c2Vkb3duPWwub25tb3VzZWRvd249YmtMaWIuY2FuY2VsRXZlbnQpfXRoaXMucGFuZS5hcHBlbmQoZS5ub1NlbGVjdCgpKX0sY29sb3JTZWxlY3Q6ZnVuY3Rpb24odCl7dGhpcy5uZS5uaWNDb21tYW5kKFwiZm9yZUNvbG9yXCIsdCksdGhpcy5yZW1vdmVQYW5lKCl9LG9uOmZ1bmN0aW9uKHQpe3Quc2V0U3R5bGUoe2JvcmRlcjpcIjJweCBzb2xpZCAjMDAwXCJ9KX0sb2ZmOmZ1bmN0aW9uKHQsZSl7dC5zZXRTdHlsZSh7Ym9yZGVyOlwiMnB4IHNvbGlkIFwiK2V9KX19KSxuaWNFZGl0b3JCZ0NvbG9yQnV0dG9uPW5pY0VkaXRvckNvbG9yQnV0dG9uLmV4dGVuZCh7Y29sb3JTZWxlY3Q6ZnVuY3Rpb24odCl7dGhpcy5uZS5uaWNDb21tYW5kKFwiaGlsaXRlQ29sb3JcIix0KSx0aGlzLnJlbW92ZVBhbmUoKX19KTtuaWNFZGl0b3JzLnJlZ2lzdGVyUGx1Z2luKG5pY1BsdWdpbixuaWNDb2xvck9wdGlvbnMpO3ZhciBuaWNJbWFnZU9wdGlvbnM9e2J1dHRvbnM6e2ltYWdlOntuYW1lOlwiQWRkIEltYWdlXCIsdHlwZTpcIm5pY0ltYWdlQnV0dG9uXCIsdGFnczpbXCJJTUdcIl19fX0sbmljSW1hZ2VCdXR0b249bmljRWRpdG9yQWR2YW5jZWRCdXR0b24uZXh0ZW5kKHthZGRQYW5lOmZ1bmN0aW9uKCl7dGhpcy5pbT10aGlzLm5lLnNlbGVjdGVkSW5zdGFuY2Uuc2VsRWxtKCkucGFyZW50VGFnKFwiSU1HXCIpLHRoaXMuYWRkRm9ybSh7XCJcIjp7dHlwZTpcInRpdGxlXCIsdHh0OlwiQWRkL0VkaXQgSW1hZ2VcIn0sc3JjOnt0eXBlOlwidGV4dFwiLHR4dDpcIlVSTFwiLHZhbHVlOlwiaHR0cDovL1wiLHN0eWxlOnt3aWR0aDpcIjE1MHB4XCJ9fSxhbHQ6e3R5cGU6XCJ0ZXh0XCIsdHh0OlwiQWx0IFRleHRcIixzdHlsZTp7d2lkdGg6XCIxMDBweFwifX0sYWxpZ246e3R5cGU6XCJzZWxlY3RcIix0eHQ6XCJBbGlnblwiLG9wdGlvbnM6e25vbmU6XCJEZWZhdWx0XCIsbGVmdDpcIkxlZnRcIixyaWdodDpcIlJpZ2h0XCJ9fX0sdGhpcy5pbSl9LHN1Ym1pdDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmlucHV0cy5zcmMudmFsdWU7aWYoXCJcIj09ZXx8XCJodHRwOi8vXCI9PWUpcmV0dXJuIGFsZXJ0KFwiWW91IG11c3QgZW50ZXIgYSBJbWFnZSBVUkwgdG8gaW5zZXJ0XCIpLCExO2lmKHRoaXMucmVtb3ZlUGFuZSgpLCF0aGlzLmltKXt2YXIgbj1cImphdmFzY3JpcHQ6bmljSW1UZW1wKCk7XCI7dGhpcy5uZS5uaWNDb21tYW5kKFwiaW5zZXJ0SW1hZ2VcIixuKSx0aGlzLmltPXRoaXMuZmluZEVsbShcIklNR1wiLFwic3JjXCIsbil9dGhpcy5pbSYmdGhpcy5pbS5zZXRBdHRyaWJ1dGVzKHtzcmM6dGhpcy5pbnB1dHMuc3JjLnZhbHVlLGFsdDp0aGlzLmlucHV0cy5hbHQudmFsdWUsYWxpZ246dGhpcy5pbnB1dHMuYWxpZ24udmFsdWV9KX19KTtuaWNFZGl0b3JzLnJlZ2lzdGVyUGx1Z2luKG5pY1BsdWdpbixuaWNJbWFnZU9wdGlvbnMpO3ZhciBuaWNTYXZlT3B0aW9ucz17YnV0dG9uczp7c2F2ZTp7bmFtZTpfXyhcIlNhdmUgdGhpcyBjb250ZW50XCIpLHR5cGU6XCJuaWNFZGl0b3JTYXZlQnV0dG9uXCJ9fX0sbmljRWRpdG9yU2F2ZUJ1dHRvbj1uaWNFZGl0b3JCdXR0b24uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKCl7dGhpcy5uZS5vcHRpb25zLm9uU2F2ZXx8dGhpcy5tYXJnaW4uc2V0U3R5bGUoe2Rpc3BsYXk6XCJub25lXCJ9KX0sbW91c2VDbGljazpmdW5jdGlvbigpe3ZhciB0PXRoaXMubmUub3B0aW9ucy5vblNhdmUsZT10aGlzLm5lLnNlbGVjdGVkSW5zdGFuY2U7dChlLmdldENvbnRlbnQoKSxlLmVsbS5pZCxlKX19KTtuaWNFZGl0b3JzLnJlZ2lzdGVyUGx1Z2luKG5pY1BsdWdpbixuaWNTYXZlT3B0aW9ucyk7dmFyIG5pY1hIVE1MPWJrQ2xhc3MuZXh0ZW5kKHtzdHJpcEF0dHJpYnV0ZXM6W1wiX21vel9kaXJ0eVwiLFwiX21vel9yZXNpemluZ1wiLFwiX2V4dGVuZGVkXCJdLG5vU2hvcnQ6W1wic3R5bGVcIixcInRpdGxlXCIsXCJzY3JpcHRcIixcInRleHRhcmVhXCIsXCJhXCJdLGNzc1JlcGxhY2U6e1wiZm9udC13ZWlnaHQ6Ym9sZDtcIjpcInN0cm9uZ1wiLFwiZm9udC1zdHlsZTppdGFsaWM7XCI6XCJlbVwifSxzaXplczp7MTpcInh4LXNtYWxsXCIsMjpcIngtc21hbGxcIiwzOlwic21hbGxcIiw0OlwibWVkaXVtXCIsNTpcImxhcmdlXCIsNjpcIngtbGFyZ2VcIn0sY29uc3RydWN0OmZ1bmN0aW9uKHQpe3RoaXMubmU9dCx0aGlzLm5lLm9wdGlvbnMueGh0bWwmJnQuYWRkRXZlbnQoXCJnZXRcIix0aGlzLmNsZWFudXAuY2xvc3VyZSh0aGlzKSl9LGNsZWFudXA6ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRFbG0oKSxuPXRoaXMudG9YSFRNTChlKTt0LmNvbnRlbnQ9bn0sdG9YSFRNTDpmdW5jdGlvbih0LGUsbil7dmFyIGk9XCJcIixzPVwiXCIsbz1cIlwiLGE9dC5ub2RlVHlwZSxyPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxsPXQuaGFzQ2hpbGROb2RlcyYmdC5oYXNDaGlsZE5vZGVzKCksYz1uZXcgQXJyYXk7c3dpdGNoKGEpe2Nhc2UgMTp2YXIgZD10LmF0dHJpYnV0ZXM7c3dpdGNoKHIpe2Nhc2VcImJcIjpyPVwic3Ryb25nXCI7YnJlYWs7Y2FzZVwiaVwiOnI9XCJlbVwiO2JyZWFrO2Nhc2VcImZvbnRcIjpyPVwic3BhblwifWlmKGUpe2Zvcih2YXIgaD0wO2g8ZC5sZW5ndGg7aCsrKXt2YXIgdT1kW2hdLHA9dS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLG09dS5ub2RlVmFsdWU7aWYodS5zcGVjaWZpZWQmJm0mJiFia0xpYi5pbkFycmF5KHRoaXMuc3RyaXBBdHRyaWJ1dGVzLHApJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBtKXtzd2l0Y2gocCl7Y2FzZVwic3R5bGVcIjp2YXIgZj1tLnJlcGxhY2UoLyAvZyxcIlwiKTtmb3IoaXRtIGluIHRoaXMuY3NzUmVwbGFjZSktMSE9Zi5pbmRleE9mKGl0bSkmJihjLnB1c2godGhpcy5jc3NSZXBsYWNlW2l0bV0pLGY9Zi5yZXBsYWNlKGl0bSxcIlwiKSk7bys9ZixtPVwiXCI7YnJlYWs7Y2FzZVwiY2xhc3NcIjptPW0ucmVwbGFjZShcIkFwcGxlLXN0eWxlLXNwYW5cIixcIlwiKTticmVhaztjYXNlXCJzaXplXCI6bys9XCJmb250LXNpemU6XCIrdGhpcy5zaXplc1ttXStcIjtcIixtPVwiXCJ9bSYmKHMrPVwiIFwiK3ArJz1cIicrbSsnXCInKX19byYmKHMrPScgc3R5bGU9XCInK28rJ1wiJyk7Zm9yKGg9MDtoPGMubGVuZ3RoO2grKylpKz1cIjxcIitjW2hdK1wiPlwiO1wiXCI9PXMmJlwic3BhblwiPT1yJiYoZT0hMSksZSYmKGkrPVwiPFwiK3IsXCJiclwiIT1yJiYoaSs9cykpfWlmKGx8fGJrTGliLmluQXJyYXkodGhpcy5ub1Nob3J0LHApKXtlJiYoaSs9XCI+XCIpO2ZvcihoPTA7aDx0LmNoaWxkTm9kZXMubGVuZ3RoO2grKyl7dmFyIGc9dGhpcy50b1hIVE1MKHQuY2hpbGROb2Rlc1toXSwhMCwhMCk7ZyYmKGkrPWcpfX1lbHNlIGUmJihpKz1cIiAvPlwiKTtlJiZsJiYoaSs9XCI8L1wiK3IrXCI+XCIpO2ZvcihoPTA7aDxjLmxlbmd0aDtoKyspaSs9XCI8L1wiK2NbaF0rXCI+XCI7YnJlYWs7Y2FzZSAzOmkrPXQubm9kZVZhbHVlfXJldHVybiBpfX0pO25pY0VkaXRvcnMucmVnaXN0ZXJQbHVnaW4obmljWEhUTUwpO3ZhciBuaWNDb2RlT3B0aW9ucz17YnV0dG9uczp7eGh0bWw6e25hbWU6XCJFZGl0IEhUTUxcIix0eXBlOlwibmljQ29kZUJ1dHRvblwifX19LG5pY0NvZGVCdXR0b249bmljRWRpdG9yQWR2YW5jZWRCdXR0b24uZXh0ZW5kKHt3aWR0aDpcIjM1MHB4XCIsYWRkUGFuZTpmdW5jdGlvbigpe3RoaXMuYWRkRm9ybSh7XCJcIjp7dHlwZTpcInRpdGxlXCIsdHh0OlwiRWRpdCBIVE1MXCJ9LGNvZGU6e3R5cGU6XCJjb250ZW50XCIsdmFsdWU6dGhpcy5uZS5zZWxlY3RlZEluc3RhbmNlLmdldENvbnRlbnQoKSxzdHlsZTp7d2lkdGg6XCIzNDBweFwiLGhlaWdodDpcIjIwMHB4XCJ9fX0pfSxzdWJtaXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5pbnB1dHMuY29kZS52YWx1ZTt0aGlzLm5lLnNlbGVjdGVkSW5zdGFuY2Uuc2V0Q29udGVudChlKSx0aGlzLnJlbW92ZVBhbmUoKX19KTtuaWNFZGl0b3JzLnJlZ2lzdGVyUGx1Z2luKG5pY1BsdWdpbixuaWNDb2RlT3B0aW9ucyk7dmFyIG5pY0JCQ29kZT1ia0NsYXNzLmV4dGVuZCh7Y29uc3RydWN0OmZ1bmN0aW9uKHQpe2lmKHRoaXMubmU9dCx0aGlzLm5lLm9wdGlvbnMuYmJDb2RlKXt0LmFkZEV2ZW50KFwiZ2V0XCIsdGhpcy5iYkdldC5jbG9zdXJlKHRoaXMpKSx0LmFkZEV2ZW50KFwic2V0XCIsdGhpcy5iYlNldC5jbG9zdXJlKHRoaXMpKTt2YXIgZT10aGlzLm5lLmxvYWRlZFBsdWdpbnM7Zm9yKGl0bSBpbiBlKWVbaXRtXS50b1hIVE1MJiYodGhpcy54aHRtbD1lW2l0bV0pfX0sYmJHZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy54aHRtbC50b1hIVE1MKHQuZ2V0RWxtKCkpO3QuY29udGVudD10aGlzLnRvQkJDb2RlKGUpfSxiYlNldDpmdW5jdGlvbih0KXt0LmNvbnRlbnQ9dGhpcy5mcm9tQkJDb2RlKHQuY29udGVudCl9LHRvQkJDb2RlOmZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuKXt0PXQucmVwbGFjZShlLG4pfXJldHVybiBlKC9cXG4vZ2ksXCJcIiksZSgvPHN0cm9uZz4oLio/KTxcXC9zdHJvbmc+L2dpLFwiW2JdJDFbL2JdXCIpLGUoLzxlbT4oLio/KTxcXC9lbT4vZ2ksXCJbaV0kMVsvaV1cIiksZSgvPHNwYW4uKj9zdHlsZT1cInRleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmU7XCI+KC4qPyk8XFwvc3Bhbj4vZ2ksXCJbdV0kMVsvdV1cIiksZSgvPHVsPiguKj8pPFxcL3VsPi9naSxcIltsaXN0XSQxWy9saXN0XVwiKSxlKC88bGk+KC4qPyk8XFwvbGk+L2dpLFwiWypdJDFbXVwiKSxlKC88b2w+KC4qPyk8XFwvb2w+L2dpLFwiW2xpc3Q9MV0kMVsvbGlzdF1cIiksZSgvPGltZy4qP3NyYz1cIiguKj8pXCIuKj8+L2dpLFwiW2ltZ10kMVsvaW1nXVwiKSxlKC88YS4qP2hyZWY9XCIoLio/KVwiLio/PiguKj8pPFxcL2E+L2dpLFwiW3VybD0kMV0kMlsvdXJsXVwiKSxlKC88YnIuKj8+L2dpLFwiXFxuXCIpLGUoLzwuKj8+Lio/PFxcLy4qPz4vZ2ksXCJcIiksdH0sZnJvbUJCQ29kZTpmdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbil7dD10LnJlcGxhY2UoZSxuKX1yZXR1cm4gZSgvXFxbYlxcXSguKj8pXFxbXFwvYlxcXS9naSxcIjxzdHJvbmc+JDE8L3N0cm9uZz5cIiksZSgvXFxbaVxcXSguKj8pXFxbXFwvaVxcXS9naSxcIjxlbT4kMTwvZW0+XCIpLGUoL1xcW3VcXF0oLio/KVxcW1xcL3VcXF0vZ2ksJzxzcGFuIHN0eWxlPVwidGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZTtcIj4kMTwvc3Bhbj4nKSxlKC9cXFtsaXN0XFxdKC4qPylcXFtcXC9saXN0XFxdL2dpLFwiPHVsPiQxPC91bD5cIiksZSgvXFxbbGlzdD0xXFxdKC4qPylcXFtcXC9saXN0XFxdL2dpLFwiPG9sPiQxPC9vbD5cIiksZSgvXFxbXFwqXFxdKC4qPylcXFtcXC9cXCpcXF0vZ2ksXCI8bGk+JDE8L2xpPlwiKSxlKC9cXFtpbWdcXF0oLio/KVxcW1xcL2ltZ1xcXS9naSwnPGltZyBzcmM9XCIkMVwiIC8+JyksZSgvXFxbdXJsPSguKj8pXFxdKC4qPylcXFtcXC91cmxcXF0vZ2ksJzxhIGhyZWY9XCIkMVwiPiQyPC9hPicpLGUoL1xcbi9naSxcIjxiciAvPlwiKSx0fX0pO25pY0VkaXRvcnMucmVnaXN0ZXJQbHVnaW4obmljQkJDb2RlKTt2YXIgbmljVXBsb2FkT3B0aW9ucz17YnV0dG9uczp7dXBsb2FkOntuYW1lOlwiVXBsb2FkIEltYWdlXCIsdHlwZTpcIm5pY1VwbG9hZEJ1dHRvblwifX19LG5pY1VwbG9hZEJ1dHRvbj1uaWNFZGl0b3JBZHZhbmNlZEJ1dHRvbi5leHRlbmQoe25pY1VSSTpcImh0dHBzOi8vYXBpLmltZ3VyLmNvbS8zL2ltYWdlXCIsZXJyb3JUZXh0OlwiRmFpbGVkIHRvIHVwbG9hZCBpbWFnZVwiLGFkZFBhbmU6ZnVuY3Rpb24oKXtpZih2b2lkIDA9PT13aW5kb3cuRm9ybURhdGEpcmV0dXJuIHRoaXMub25FcnJvcihcIkltYWdlIHVwbG9hZHMgYXJlIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyLCB1c2UgQ2hyb21lLCBGaXJlZm94LCBvciBTYWZhcmkgaW5zdGVhZC5cIik7dGhpcy5pbT10aGlzLm5lLnNlbGVjdGVkSW5zdGFuY2Uuc2VsRWxtKCkucGFyZW50VGFnKFwiSU1HXCIpO3ZhciB0PW5ldyBia0VsZW1lbnQoXCJkaXZcIikuc2V0U3R5bGUoe3BhZGRpbmc6XCIxMHB4XCJ9KS5hcHBlbmRUbyh0aGlzLnBhbmUucGFuZSk7bmV3IGJrRWxlbWVudChcImRpdlwiKS5zZXRTdHlsZSh7Zm9udFNpemU6XCIxNHB4XCIsZm9udFdlaWdodDpcImJvbGRcIixwYWRkaW5nQm90dG9tOlwiNXB4XCJ9KS5zZXRDb250ZW50KFwiSW5zZXJ0IGFuIEltYWdlXCIpLmFwcGVuZFRvKHQpLHRoaXMuZmlsZUlucHV0PW5ldyBia0VsZW1lbnQoXCJpbnB1dFwiKS5zZXRBdHRyaWJ1dGVzKHt0eXBlOlwiZmlsZVwifSkuYXBwZW5kVG8odCksdGhpcy5wcm9ncmVzcz1uZXcgYmtFbGVtZW50KFwicHJvZ3Jlc3NcIikuc2V0U3R5bGUoe3dpZHRoOlwiMTAwJVwiLGRpc3BsYXk6XCJub25lXCJ9KS5zZXRBdHRyaWJ1dGVzKFwibWF4XCIsMTAwKS5hcHBlbmRUbyh0KSx0aGlzLmZpbGVJbnB1dC5vbmNoYW5nZT10aGlzLnVwbG9hZEZpbGUuY2xvc3VyZSh0aGlzKX0sb25FcnJvcjpmdW5jdGlvbih0KXt0aGlzLnJlbW92ZVBhbmUoKSxhbGVydCh0fHxcIkZhaWxlZCB0byB1cGxvYWQgaW1hZ2VcIil9LHVwbG9hZEZpbGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmZpbGVJbnB1dC5maWxlc1swXTtpZih0JiZ0LnR5cGUubWF0Y2goL2ltYWdlLiovKSl7dGhpcy5maWxlSW5wdXQuc2V0U3R5bGUoe2Rpc3BsYXk6XCJub25lXCJ9KSx0aGlzLnNldFByb2dyZXNzKDApO3ZhciBlPW5ldyBGb3JtRGF0YTtlLmFwcGVuZChcImltYWdlXCIsdCk7dmFyIG49bmV3IFhNTEh0dHBSZXF1ZXN0O24ub3BlbihcIlBPU1RcIix0aGlzLm5lLm9wdGlvbnMudXBsb2FkVVJJfHx0aGlzLm5pY1VSSSksbi5vbmxvYWQ9ZnVuY3Rpb24oKXt0cnl7dmFyIHQ9SlNPTi5wYXJzZShuLnJlc3BvbnNlVGV4dCkuZGF0YX1jYXRjaCh0KXtyZXR1cm4gdGhpcy5vbkVycm9yKCl9aWYodC5lcnJvcilyZXR1cm4gdGhpcy5vbkVycm9yKHQuZXJyb3IpO3RoaXMub25VcGxvYWRlZCh0KX0uY2xvc3VyZSh0aGlzKSxuLm9uZXJyb3I9dGhpcy5vbkVycm9yLmNsb3N1cmUodGhpcyksbi51cGxvYWQub25wcm9ncmVzcz1mdW5jdGlvbih0KXt0aGlzLnNldFByb2dyZXNzKHQubG9hZGVkL3QudG90YWwpfS5jbG9zdXJlKHRoaXMpLG4uc2V0UmVxdWVzdEhlYWRlcihcIkF1dGhvcml6YXRpb25cIixcIkNsaWVudC1JRCBjMzdmYzA1MTk5YTA1YjdcIiksbi5zZW5kKGUpfWVsc2UgdGhpcy5vbkVycm9yKFwiT25seSBpbWFnZSBmaWxlcyBjYW4gYmUgdXBsb2FkZWRcIil9LHNldFByb2dyZXNzOmZ1bmN0aW9uKHQpe3RoaXMucHJvZ3Jlc3Muc2V0U3R5bGUoe2Rpc3BsYXk6XCJibG9ja1wifSksdDwuOTg/dGhpcy5wcm9ncmVzcy52YWx1ZT10OnRoaXMucHJvZ3Jlc3MucmVtb3ZlQXR0cmlidXRlKFwidmFsdWVcIil9LG9uVXBsb2FkZWQ6ZnVuY3Rpb24odCl7dGhpcy5yZW1vdmVQYW5lKCk7dmFyIGU9dC5saW5rO2lmKCF0aGlzLmltKXt0aGlzLm5lLnNlbGVjdGVkSW5zdGFuY2UucmVzdG9yZVJuZygpO3RoaXMubmUubmljQ29tbWFuZChcImluc2VydEltYWdlXCIsZSksdGhpcy5pbT10aGlzLmZpbmRFbG0oXCJJTUdcIixcInNyY1wiLGUpfXZhciBuPXBhcnNlSW50KHRoaXMubmUuc2VsZWN0ZWRJbnN0YW5jZS5lbG0uZ2V0U3R5bGUoXCJ3aWR0aFwiKSk7dGhpcy5pbSYmdGhpcy5pbS5zZXRBdHRyaWJ1dGVzKHtzcmM6ZSx3aWR0aDpuJiZ0LndpZHRoP01hdGgubWluKG4sdC53aWR0aCk6XCJcIn0pfX0pO25pY0VkaXRvcnMucmVnaXN0ZXJQbHVnaW4obmljUGx1Z2luLG5pY1VwbG9hZE9wdGlvbnMpOyIsInZhciBzbGljZT1bXS5zbGljZTshZnVuY3Rpb24odCxuKXt2YXIgcjtuLlN0YXJycj1yPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihuLHIpe3ZhciBzOyh0aGlzLm9wdGlvbnM9dC5leHRlbmQoe30sdGhpcy5kZWZhdWx0cyxyKSx0aGlzLiRlbD1uLHRoaXMuY3JlYXRlU3RhcnMoKSx0aGlzLnN5bmNSYXRpbmcoKSx0aGlzLm9wdGlvbnMucmVhZE9ubHkpfHwodGhpcy4kZWwub24oXCJtb3VzZW92ZXIuc3RhcnJyXCIsXCJhXCIsKHM9dGhpcyxmdW5jdGlvbih0KXtyZXR1cm4gcy5zeW5jUmF0aW5nKHMuZ2V0U3RhcnMoKS5pbmRleCh0LmN1cnJlbnRUYXJnZXQpKzEpfSkpLHRoaXMuJGVsLm9uKFwibW91c2VvdXQuc3RhcnJyXCIsZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuc3luY1JhdGluZygpfX0odGhpcykpLHRoaXMuJGVsLm9uKFwiY2xpY2suc3RhcnJyXCIsXCJhXCIsZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiBuLnByZXZlbnREZWZhdWx0KCksdC5zZXRSYXRpbmcodC5nZXRTdGFycygpLmluZGV4KG4uY3VycmVudFRhcmdldCkrMSl9fSh0aGlzKSksdGhpcy4kZWwub24oXCJzdGFycnI6Y2hhbmdlXCIsdGhpcy5vcHRpb25zLmNoYW5nZSkpfXJldHVybiBuLnByb3RvdHlwZS5kZWZhdWx0cz17cmF0aW5nOnZvaWQgMCxtYXg6NSxyZWFkT25seTohMSxlbXB0eUNsYXNzOlwiZmEgZmEtc3Rhci1vXCIsZnVsbENsYXNzOlwiZmEgZmEtc3RhclwiLGNoYW5nZTpmdW5jdGlvbih0LG4pe319LG4ucHJvdG90eXBlLmdldFN0YXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVsLmZpbmQoXCJhXCIpfSxuLnByb3RvdHlwZS5jcmVhdGVTdGFycz1mdW5jdGlvbigpe3ZhciB0LG4scjtmb3Iocj1bXSx0PTEsbj10aGlzLm9wdGlvbnMubWF4OzE8PW4/dDw9bjp0Pj1uOzE8PW4/dCsrOnQtLSlyLnB1c2godGhpcy4kZWwuYXBwZW5kKFwiPGEgaHJlZj0nIycgLz5cIikpO3JldHVybiByfSxuLnByb3RvdHlwZS5zZXRSYXRpbmc9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3B0aW9ucy5yYXRpbmc9PT10JiYodD12b2lkIDApLHRoaXMub3B0aW9ucy5yYXRpbmc9dCx0aGlzLnN5bmNSYXRpbmcoKSx0aGlzLiRlbC50cmlnZ2VyKFwic3RhcnJyOmNoYW5nZVwiLHQpfSxuLnByb3RvdHlwZS5nZXRSYXRpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLnJhdGluZ30sbi5wcm90b3R5cGUuc3luY1JhdGluZz1mdW5jdGlvbih0KXt2YXIgbixyLHMsaSxlO2Zvcih0fHwodD10aGlzLm9wdGlvbnMucmF0aW5nKSxuPXRoaXMuZ2V0U3RhcnMoKSxlPVtdLHI9cz0xLGk9dGhpcy5vcHRpb25zLm1heDsxPD1pP3M8PWk6cz49aTtyPTE8PWk/KytzOi0tcyllLnB1c2gobi5lcShyLTEpLnJlbW92ZUNsYXNzKHQ+PXI/dGhpcy5vcHRpb25zLmVtcHR5Q2xhc3M6dGhpcy5vcHRpb25zLmZ1bGxDbGFzcykuYWRkQ2xhc3ModD49cj90aGlzLm9wdGlvbnMuZnVsbENsYXNzOnRoaXMub3B0aW9ucy5lbXB0eUNsYXNzKSk7cmV0dXJuIGV9LG59KCksdC5mbi5leHRlbmQoe3N0YXJycjpmdW5jdGlvbigpe3ZhciBuLHM7cmV0dXJuIHM9YXJndW1lbnRzWzBdLG49Mjw9YXJndW1lbnRzLmxlbmd0aD9zbGljZS5jYWxsKGFyZ3VtZW50cywxKTpbXSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgaTtpZigoaT10KHRoaXMpLmRhdGEoXCJzdGFycnJcIikpfHx0KHRoaXMpLmRhdGEoXCJzdGFycnJcIixpPW5ldyByKHQodGhpcykscykpLFwic3RyaW5nXCI9PXR5cGVvZiBzKXJldHVybiBpW3NdLmFwcGx5KGksbil9KX19KX0od2luZG93LmpRdWVyeSx3aW5kb3cpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
